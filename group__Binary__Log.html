<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: Binary Log</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Binary Log</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMutex__sentry.html">Mutex_sentry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThread__excursion.html">Thread_excursion</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbinlog__cache__data.html">binlog_cache_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbinlog__stmt__cache__data.html">binlog_stmt_cache_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbinlog__trx__cache__data.html">binlog_trx_cache_data</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbinlog__cache__mngr.html">binlog_cache_mngr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRow__data__memory.html">Row_data_memory</a></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga1e24693cd278a03ccca7bc269375ad16">enum_read_gtids_from_binlog_status</a> { <br/>
&#160;&#160;<b>GOT_GTIDS</b>, 
<b>GOT_PREVIOUS_GTIDS</b>, 
<b>NO_GTIDS</b>, 
<b>ERROR</b>, 
<br/>
&#160;&#160;<b>TRUNCATED</b>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga63c6fcd1b8e84116f7bcec46e7b25caa">check_binlog_cache_size</a> (THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga7a0a12298d22d080b68e55f324cd59bd">check_binlog_stmt_cache_size</a> (THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga46468c405fde69f126c1bcb343c85c90">binlog_enabled</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gaa6d2bcbece5df8c93fe833e0a58f06d0">gtid_empty_group_log_and_cleanup</a> (THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga24b696534d053643574f8ccf2bf5815f"></a><!-- doxytag: member="Binary_Log::check_binlog_magic" ref="ga24b696534d053643574f8ccf2bf5815f" args="(IO_CACHE *log, const char **errmsg)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>check_binlog_magic</b> (IO_CACHE *log, const char **errmsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">File&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga79ed24f2c1a0645530426f4346470781">open_binlog_file</a> (IO_CACHE *log, const char *log_file_name, const char **errmsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga25239dc38f22eeef6e1aea243af6fd9a">trans_has_updated_trans_table</a> (const THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga0db7290468d8e62cd647323a0e9b5061">stmt_has_updated_trans_table</a> (const THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gaad02774240e19d361a32bd35c9db60cb">ending_trans</a> (THD *thd, const bool all)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga80a5419e22b84b8ca2f3595cbf75fa67">ending_single_stmt_trans</a> (THD *thd, const bool all)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga1d647f955254c565dc33abf8caabdbab">trans_cannot_safely_rollback</a> (const THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga07a668f531f059316c8f17dfcecfd465">stmt_cannot_safely_rollback</a> (const THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga1f15ff584adebd77fd1bf4ebc88a68b6">purge_master_logs</a> (THD *thd, const char *to_log)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga38f8e56905c5205bb8cf6268cd203cb2">purge_master_logs_before_date</a> (THD *thd, time_t purge_time)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga30ae6bafee492a4342e739018cfb6701"></a><!-- doxytag: member="Binary_Log::query_error_code" ref="ga30ae6bafee492a4342e739018cfb6701" args="(THD *thd, bool not_killed)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>query_error_code</b> (THD *thd, bool not_killed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga1d6091ef19ba4fb6819e758344298210">log_loaded_block</a> (IO_CACHE *file)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga327e9d3c600bf0899a7973444938d0e3"></a><!-- doxytag: member="Binary_Log::show_binlog_events" ref="ga327e9d3c600bf0899a7973444938d0e3" args="(THD *thd, MYSQL_BIN_LOG *binary_log)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>show_binlog_events</b> (THD *thd, <a class="el" href="classMYSQL__BIN__LOG.html">MYSQL_BIN_LOG</a> *binary_log)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga0490669ea3aef1d30fa41d44079c8cb2">mysql_show_binlog_events</a> (THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga53bb73d56883af0d06d664f19407eac1"></a><!-- doxytag: member="Binary_Log::register_binlog_handler" ref="ga53bb73d56883af0d06d664f19407eac1" args="(THD *thd, bool trx)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>register_binlog_handler</b> (THD *thd, bool trx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5af09c853f5dcd42347e8343a0ccbc2b"></a><!-- doxytag: member="Binary_Log::finalize" ref="ga5af09c853f5dcd42347e8343a0ccbc2b" args="(THD *thd)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>binlog_stmt_cache_data::finalize</b> (THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac3a0b36dc3c576520f72b80298791400"></a><!-- doxytag: member="Binary_Log::write_event" ref="gac3a0b36dc3c576520f72b80298791400" args="(THD *thd, Log_event *event)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>binlog_cache_data::write_event</b> (THD *thd, <a class="el" href="classLog__event.html">Log_event</a> *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga3367fa8c1daced18065f6b9dea5385fe">binlog_cache_data::finalize</a> (THD *thd, <a class="el" href="classLog__event.html">Log_event</a> *end_event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga302d2ea7bfcbea015c329edacdac6c5a">binlog_cache_data::flush</a> (THD *thd, my_off_t *bytes, bool *wrote_xid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gae0d03425fee2a702a9b4dfac7b9de4b1">binlog_trx_cache_data::truncate</a> (THD *thd, bool all)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga20a543666e684f08da1cc093d5fa70ec">Stage_manager::Mutex_queue::append</a> (THD *first)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac617a778e2de5141ba0d25ca33ccac78"></a><!-- doxytag: member="Binary_Log::pop_front" ref="gac617a778e2de5141ba0d25ca33ccac78" args="()" -->
std::pair&lt; bool, THD * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>Stage_manager::Mutex_queue::pop_front</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga71a83004e5774879856189f84d00094f">Stage_manager::enroll_for</a> (StageID stage, THD *first, mysql_mutex_t *stage_mutex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">THD *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga254675ae9d8f6f0a7b48d7520ab16eea">Stage_manager::Mutex_queue::fetch_and_empty</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gad3389586ace2de50ee7606d7acc98849">Stage_manager::clear_preempt_status</a> (THD *head)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga9590d29210bd03fce1b8f9effc7c2d2a">MYSQL_BIN_LOG::rollback</a> (THD *thd, bool all)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga804686ce7bfb2efc36c0e78c4c35555b"></a><!-- doxytag: member="Binary_Log::MYSQL_BIN_LOG" ref="ga804686ce7bfb2efc36c0e78c4c35555b" args="(uint *sync_period)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::MYSQL_BIN_LOG</b> (uint *sync_period)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga2d8c70fe2db7fc6a5ffba006997e9064">MYSQL_BIN_LOG::cleanup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga38e419bec25df519f933787e11e0050e"></a><!-- doxytag: member="Binary_Log::init_pthread_objects" ref="ga38e419bec25df519f933787e11e0050e" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::init_pthread_objects</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacc6f71042007e6a8cf40b5b4a95d562b"></a><!-- doxytag: member="Binary_Log::open_index_file" ref="gacc6f71042007e6a8cf40b5b4a95d562b" args="(const char *index_file_name_arg, const char *log_name, bool need_lock_index)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::open_index_file</b> (const char *index_file_name_arg, const char *log_name, bool need_lock_index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gab8925923df0bf9cd07f7fcaf45f8db16">MYSQL_BIN_LOG::find_first_log_not_in_gtid_set</a> (char *binlog_file_name, const <a class="el" href="classGtid__set.html">Gtid_set</a> *gtid_set, <a class="el" href="structGtid.html">Gtid</a> *first_gtid, const char **errmsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga43ef27d48e9ff7dbc2c0d75f481acbc2">MYSQL_BIN_LOG::init_gtid_sets</a> (<a class="el" href="classGtid__set.html">Gtid_set</a> *gtid_set, <a class="el" href="classGtid__set.html">Gtid_set</a> *lost_groups, <a class="el" href="structGtid.html">Gtid</a> *last_gtid, bool verify_checksum, bool need_lock, bool is_server_starting=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga1eb09393ab56b2ba8a7620cbd4cb34b9">MYSQL_BIN_LOG::open_binlog</a> (const char *log_name, const char *new_name, enum cache_type io_cache_type_arg, ulong max_size, bool null_created, bool need_lock_index, bool need_sid_lock, <a class="el" href="classFormat__description__log__event.html">Format_description_log_event</a> *extra_description_event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gab57cd148796a62181465bb25db0e236c">MYSQL_BIN_LOG::move_crash_safe_index_file_to_index_file</a> (bool need_lock_index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga264a159d100314afaae92b304f9cd47a">MYSQL_BIN_LOG::add_log_to_index</a> (uchar *log_file_name, int name_len, bool need_lock_index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5e7969eb64fa91daf05966a9cc1c5a1a"></a><!-- doxytag: member="Binary_Log::get_current_log" ref="ga5e7969eb64fa91daf05966a9cc1c5a1a" args="(LOG_INFO *linfo)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::get_current_log</b> (<a class="el" href="structst__log__info.html">LOG_INFO</a> *linfo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga826bbc38d9566f349fbf9e4cb6c682bc"></a><!-- doxytag: member="Binary_Log::raw_get_current_log" ref="ga826bbc38d9566f349fbf9e4cb6c682bc" args="(LOG_INFO *linfo)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::raw_get_current_log</b> (<a class="el" href="structst__log__info.html">LOG_INFO</a> *linfo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga55e22d76ff3054cc3f3b07882ff01fc4"></a><!-- doxytag: member="Binary_Log::check_write_error" ref="ga55e22d76ff3054cc3f3b07882ff01fc4" args="(THD *thd)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::check_write_error</b> (THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabc5fc9619717b2ab90bdbd5197ea774d"></a><!-- doxytag: member="Binary_Log::set_write_error" ref="gabc5fc9619717b2ab90bdbd5197ea774d" args="(THD *thd, bool is_transactional)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::set_write_error</b> (THD *thd, bool is_transactional)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga245bb1e482896f726e11719666f2394a">MYSQL_BIN_LOG::find_log_pos</a> (<a class="el" href="structst__log__info.html">LOG_INFO</a> *linfo, const char *log_name, bool need_lock_index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga8ed66e95398bcafa143ca8ad16860711">MYSQL_BIN_LOG::find_next_log</a> (<a class="el" href="structst__log__info.html">LOG_INFO</a> *linfo, bool need_lock_index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga585728a123b2a0b37d5777e79d435ccc">MYSQL_BIN_LOG::reset_logs</a> (THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga5bbd66f9464d9a83f33fdcdba20d7d99">MYSQL_BIN_LOG::set_crash_safe_index_file_name</a> (const char *base_file_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gac6d69e1ee6b9099429bd919af752a0eb">MYSQL_BIN_LOG::open_crash_safe_index_file</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gad5cf0683506dfdcc484155c676786860">MYSQL_BIN_LOG::close_crash_safe_index_file</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gac9f15d1126e85d2acca6e06c92ea60f1">MYSQL_BIN_LOG::purge_first_log</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, bool included)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga8453da69cf16851231e33586e8992ea4">MYSQL_BIN_LOG::remove_logs_from_index</a> (<a class="el" href="structst__log__info.html">LOG_INFO</a> *linfo, bool need_update_threads)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga5e04e209edd9b720574d2a34ed8fc117">MYSQL_BIN_LOG::purge_logs</a> (const char *to_log, bool included, bool need_lock_index, bool need_update_threads, ulonglong *decrease_log_space, bool auto_purge)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga50d38b4893900ea098471f69cbd4e14a"></a><!-- doxytag: member="Binary_Log::set_purge_index_file_name" ref="ga50d38b4893900ea098471f69cbd4e14a" args="(const char *base_file_name)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::set_purge_index_file_name</b> (const char *base_file_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5b15802f896ddf6689c06f6d847d194b"></a><!-- doxytag: member="Binary_Log::open_purge_index_file" ref="ga5b15802f896ddf6689c06f6d847d194b" args="(bool destroy)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::open_purge_index_file</b> (bool destroy)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga11e7a42f9b759958fcb48c5fce0645fe"></a><!-- doxytag: member="Binary_Log::close_purge_index_file" ref="ga11e7a42f9b759958fcb48c5fce0645fe" args="()" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::close_purge_index_file</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaca91c2fec3e0fcfd59e3adff0549c590"></a><!-- doxytag: member="Binary_Log::is_inited_purge_index_file" ref="gaca91c2fec3e0fcfd59e3adff0549c590" args="()" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::is_inited_purge_index_file</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga47bcf9a0b3e76319dcb1a39a38be5386"></a><!-- doxytag: member="Binary_Log::sync_purge_index_file" ref="ga47bcf9a0b3e76319dcb1a39a38be5386" args="()" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::sync_purge_index_file</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga474f73fafc4d1c1504c6a08a1b7cca02"></a><!-- doxytag: member="Binary_Log::register_purge_index_entry" ref="ga474f73fafc4d1c1504c6a08a1b7cca02" args="(const char *entry)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::register_purge_index_entry</b> (const char *entry)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad2fa3a1ea5448f3e685da73d94f62505"></a><!-- doxytag: member="Binary_Log::register_create_index_entry" ref="gad2fa3a1ea5448f3e685da73d94f62505" args="(const char *entry)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::register_create_index_entry</b> (const char *entry)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab9f8dd27495fec25114ccdec0917ed4a"></a><!-- doxytag: member="Binary_Log::purge_index_entry" ref="gab9f8dd27495fec25114ccdec0917ed4a" args="(THD *thd, ulonglong *decrease_log_space, bool need_lock_index)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::purge_index_entry</b> (THD *thd, ulonglong *decrease_log_space, bool need_lock_index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gac126e05bd18fabf135844faef05ff28c">MYSQL_BIN_LOG::purge_logs_before_date</a> (time_t purge_time, bool auto_purge)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga94f694096c1ef28962d9d7936d2d9a1e">MYSQL_BIN_LOG::make_log_name</a> (char *buf, const char *log_ident)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gaac641bdabee70ba4bd377e06e1853fcb">MYSQL_BIN_LOG::is_active</a> (const char *log_file_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae455eec3547a9c58913acad74c946c60"></a><!-- doxytag: member="Binary_Log::new_file" ref="gae455eec3547a9c58913acad74c946c60" args="(Format_description_log_event *extra_description_event)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::new_file</b> (<a class="el" href="classFormat__description__log__event.html">Format_description_log_event</a> *extra_description_event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gae40c4dc6b0b8986a50661b28df3a6fa3">MYSQL_BIN_LOG::flush_and_sync</a> (const bool force=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac7408e146d23b953fd8e41d58a73119f"></a><!-- doxytag: member="Binary_Log::start_union_events" ref="gac7408e146d23b953fd8e41d58a73119f" args="(THD *thd, query_id_t query_id_param)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::start_union_events</b> (THD *thd, query_id_t query_id_param)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaec4819bc9642741f8775c71225234095"></a><!-- doxytag: member="Binary_Log::stop_union_events" ref="gaec4819bc9642741f8775c71225234095" args="(THD *thd)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::stop_union_events</b> (THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa2b1915a748ef2b92e65ba67dd7b9371"></a><!-- doxytag: member="Binary_Log::is_query_in_union" ref="gaa2b1915a748ef2b92e65ba67dd7b9371" args="(THD *thd, query_id_t query_id_param)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::is_query_in_union</b> (THD *thd, query_id_t query_id_param)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga21e45fa3b5e152adacb9f9899f983b2a"></a><!-- doxytag: member="Binary_Log::update_thd_next_event_pos" ref="ga21e45fa3b5e152adacb9f9899f983b2a" args="(THD *thd)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::update_thd_next_event_pos</b> (THD *thd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7d7c8c2cc805e99d685a0d99275d72d8"></a><!-- doxytag: member="Binary_Log::flush_and_set_pending_rows_event" ref="ga7d7c8c2cc805e99d685a0d99275d72d8" args="(THD *thd, Rows_log_event *event, bool is_transactional)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::flush_and_set_pending_rows_event</b> (THD *thd, <a class="el" href="classRows__log__event.html">Rows_log_event</a> *event, bool is_transactional)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga9c19cd666a1a517386dedd4078dd93e7">MYSQL_BIN_LOG::write_event</a> (<a class="el" href="classLog__event.html">Log_event</a> *event_info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga2053b0b53a46eb5702b44966497c333f">MYSQL_BIN_LOG::rotate</a> (bool force_rotate, bool *check_purge)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gaff1889360685bd90b1d3ffba10ba3dba">MYSQL_BIN_LOG::purge</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga9f41b228c438fe7b4c710b8fdd780cfb">MYSQL_BIN_LOG::rotate_and_purge</a> (THD *thd, bool force_rotate)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2d77f5e99ad74fbd1122a9dbc3ae34e4"></a><!-- doxytag: member="Binary_Log::next_file_id" ref="ga2d77f5e99ad74fbd1122a9dbc3ae34e4" args="()" -->
uint&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::next_file_id</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabc26608fb4ccd54dafb0e3aa6844e927"></a><!-- doxytag: member="Binary_Log::do_write_cache" ref="gabc26608fb4ccd54dafb0e3aa6844e927" args="(IO_CACHE *cache)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::do_write_cache</b> (IO_CACHE *cache)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gaecc977a50e24a4f1e144d056689a645a">MYSQL_BIN_LOG::write_incident</a> (<a class="el" href="classIncident__log__event.html">Incident_log_event</a> *ev, bool need_lock_log, bool do_flush_and_sync=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gac6023a97a6c19c5e160f9dd975136474">MYSQL_BIN_LOG::write_incident</a> (THD *thd, bool need_lock_log, bool do_flush_and_sync=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#gac9dbdae7075b4f8bdef3b78d411d6481">MYSQL_BIN_LOG::write_cache</a> (THD *thd, class <a class="el" href="classbinlog__cache__data.html">binlog_cache_data</a> *<a class="el" href="classbinlog__cache__data.html">binlog_cache_data</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga10698ebc9afd7be839f7a69b7aaac141">MYSQL_BIN_LOG::wait_for_update_relay_log</a> (THD *thd, const struct timespec *timeout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga1b625b440aaf82241200b3980d94c6a9">MYSQL_BIN_LOG::wait_for_update_bin_log</a> (THD *thd, const struct timespec *timeout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga81bc7bab09f91f6524dd81c8551e4cf0">MYSQL_BIN_LOG::close</a> (uint exiting)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1668661349520d23557e796db4a0b423"></a><!-- doxytag: member="Binary_Log::set_max_size" ref="ga1668661349520d23557e796db4a0b423" args="(ulong max_size_arg)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::set_max_size</b> (ulong max_size_arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf17a43410896c12a08f8efd45ca20217"></a><!-- doxytag: member="Binary_Log::signal_update" ref="gaf17a43410896c12a08f8efd45ca20217" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>MYSQL_BIN_LOG::signal_update</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga44de4e3109fc4d50d4968191ab0f3544">MYSQL_BIN_LOG::open_binlog</a> (const char *opt_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga22e829bf97dfac49c3b05a2cbdbaf7cb">MYSQL_BIN_LOG::close</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga4789039161947fff76fa8250b120b7e3">MYSQL_BIN_LOG::prepare</a> (THD *thd, bool all)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum_result&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga94fdcfcfb5d2c85ca2a114ad2115b20e">MYSQL_BIN_LOG::commit</a> (THD *thd, bool all)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Binary__Log.html#ga0e843aafa062a4ab987d5ff75d450c41">MYSQL_BIN_LOG::recover</a> (IO_CACHE *log, <a class="el" href="classFormat__description__log__event.html">Format_description_log_event</a> *fdle, my_off_t *valid_pos)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac5449116d5d93490b34525853da65eac"></a><!-- doxytag: member="Binary_Log::opt_binlog_order_commits" ref="gac5449116d5d93490b34525853da65eac" args="" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>opt_binlog_order_commits</b> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga41d28cf3c8664bf92f1fbe1d8ba04ef0"></a><!-- doxytag: member="Binary_Log::log_bin_index" ref="ga41d28cf3c8664bf92f1fbe1d8ba04ef0" args="" -->
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>log_bin_index</b> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5dbf1a49cfaae776fd9052568c40a6ba"></a><!-- doxytag: member="Binary_Log::log_bin_basename" ref="ga5dbf1a49cfaae776fd9052568c40a6ba" args="" -->
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>log_bin_basename</b> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga70e016d5a4032854dc75a4feeb3b7a91"></a><!-- doxytag: member="Binary_Log::sync_binlog_period" ref="ga70e016d5a4032854dc75a4feeb3b7a91" args="" -->
<a class="el" href="classMYSQL__BIN__LOG.html">MYSQL_BIN_LOG</a> mysql_bin_log &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>sync_binlog_period</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct st_mysql_storage_engine&#160;</td><td class="memItemRight" valign="bottom"><b>binlog_storage_engine</b></td></tr>
</table>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga1e24693cd278a03ccca7bc269375ad16"></a><!-- doxytag: member="binlog.cc::enum_read_gtids_from_binlog_status" ref="ga1e24693cd278a03ccca7bc269375ad16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__Binary__Log.html#ga1e24693cd278a03ccca7bc269375ad16">enum_read_gtids_from_binlog_status</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads GTIDs from the given binlog file.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>File to read from. </td></tr>
    <tr><td class="paramname">all_gtids</td><td>If not NULL, then the GTIDs from the <a class="el" href="classPrevious__gtids__log__event.html">Previous_gtids_log_event</a> and from all Gtid_log_events are stored in this object. </td></tr>
    <tr><td class="paramname">prev_gtids</td><td>If not NULL, then the GTIDs from the Previous_gtids_log_events are stored in this object. </td></tr>
    <tr><td class="paramname">first_gtid</td><td>If not NULL, then the first GTID information from the file will be stored in this object. </td></tr>
    <tr><td class="paramname">last_gtid</td><td>If not NULL, then the last GTID information from the file will be stored in this object. </td></tr>
    <tr><td class="paramname">sid_map</td><td>The sid_map object to use in the rpl_sidno generation of the <a class="el" href="classGtid__log__event.html">Gtid_log_event</a>. If lock is needed in the sid_map, the caller must hold it. </td></tr>
    <tr><td class="paramname">verify_checksum</td><td>Set to true to verify event checksums.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">GOT_GTIDS</td><td>The file was successfully read and it contains both Gtid_log_events and Previous_gtids_log_events. </td></tr>
    <tr><td class="paramname">GOT_PREVIOUS_GTIDS</td><td>The file was successfully read and it contains Previous_gtids_log_events but no Gtid_log_events. </td></tr>
    <tr><td class="paramname">NO_GTIDS</td><td>The file was successfully read and it does not contain GTID events. </td></tr>
    <tr><td class="paramname">ERROR</td><td>Out of memory, or the file contains GTID events when GTID_MODE = OFF, or the file is malformed (e.g., contains Gtid_log_events but no <a class="el" href="classPrevious__gtids__log__event.html">Previous_gtids_log_event</a>). </td></tr>
    <tr><td class="paramname">TRUNCATED</td><td>The file was truncated before the end of the first <a class="el" href="classPrevious__gtids__log__event.html">Previous_gtids_log_event</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga264a159d100314afaae92b304f9cd47a"></a><!-- doxytag: member="MYSQL_BIN_LOG::add_log_to_index" ref="ga264a159d100314afaae92b304f9cd47a" args="(uchar *log_file_name, int name_len, bool need_lock_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga264a159d100314afaae92b304f9cd47a">MYSQL_BIN_LOG::add_log_to_index</a> </td>
          <td>(</td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>log_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>log_name_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_lock_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Append log file name to index file.</p>
<ul>
<li>To make crash safe, we copy all the content of index file to crash safe index file firstly and then append the log file name to the crash safe index file. Finally move the crash safe index file to index file.</li>
</ul>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">-1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga20a543666e684f08da1cc093d5fa70ec"></a><!-- doxytag: member="Stage_manager::Mutex_queue::append" ref="ga20a543666e684f08da1cc093d5fa70ec" args="(THD *first)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga20a543666e684f08da1cc093d5fa70ec">Stage_manager::Mutex_queue::append</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>first</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Append a linked list of threads to the queue </p>

</div>
</div>
<a class="anchor" id="ga46468c405fde69f126c1bcb343c85c90"></a><!-- doxytag: member="binlog.cc::binlog_enabled" ref="ga46468c405fde69f126c1bcb343c85c90" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga46468c405fde69f126c1bcb343c85c90">binlog_enabled</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check whether binlog_hton has valid slot and enabled </p>

</div>
</div>
<a class="anchor" id="ga63c6fcd1b8e84116f7bcec46e7b25caa"></a><!-- doxytag: member="binlog.cc::check_binlog_cache_size" ref="ga63c6fcd1b8e84116f7bcec46e7b25caa" args="(THD *thd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__Binary__Log.html#ga63c6fcd1b8e84116f7bcec46e7b25caa">check_binlog_cache_size</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks if the BINLOG_CACHE_SIZE's value is greater than MAX_BINLOG_CACHE_SIZE. If this happens, the BINLOG_CACHE_SIZE is set to MAX_BINLOG_CACHE_SIZE. </p>

</div>
</div>
<a class="anchor" id="ga7a0a12298d22d080b68e55f324cd59bd"></a><!-- doxytag: member="binlog.cc::check_binlog_stmt_cache_size" ref="ga7a0a12298d22d080b68e55f324cd59bd" args="(THD *thd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__Binary__Log.html#ga7a0a12298d22d080b68e55f324cd59bd">check_binlog_stmt_cache_size</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checks if the BINLOG_STMT_CACHE_SIZE's value is greater than MAX_BINLOG_STMT_CACHE_SIZE. If this happens, the BINLOG_STMT_CACHE_SIZE is set to MAX_BINLOG_STMT_CACHE_SIZE. </p>

</div>
</div>
<a class="anchor" id="ga2d8c70fe2db7fc6a5ffba006997e9064"></a><!-- doxytag: member="MYSQL_BIN_LOG::cleanup" ref="ga2d8c70fe2db7fc6a5ffba006997e9064" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__Binary__Log.html#ga2d8c70fe2db7fc6a5ffba006997e9064">MYSQL_BIN_LOG::cleanup</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is called only once. </p>

<p>Reimplemented from <a class="el" href="classMYSQL__LOG.html#a8db1eacdf37f169e6a387c293d3b543c">MYSQL_LOG</a>.</p>

</div>
</div>
<a class="anchor" id="gad3389586ace2de50ee7606d7acc98849"></a><!-- doxytag: member="Stage_manager::clear_preempt_status" ref="gad3389586ace2de50ee7606d7acc98849" args="(THD *head)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__Binary__Log.html#gad3389586ace2de50ee7606d7acc98849">Stage_manager::clear_preempt_status</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The method ensures the follower's execution path can be preempted by the leader's thread. Preempt status of <code>head</code> follower is checked to engange the leader into waiting when set.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">head</td><td>THD* of a follower thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga22e829bf97dfac49c3b05a2cbdbaf7cb"></a><!-- doxytag: member="MYSQL_BIN_LOG::close" ref="ga22e829bf97dfac49c3b05a2cbdbaf7cb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__Binary__Log.html#ga22e829bf97dfac49c3b05a2cbdbaf7cb">MYSQL_BIN_LOG::close</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is called on shutdown, after ha_panic. </p>

<p>Implements <a class="el" href="classTC__LOG.html">TC_LOG</a>.</p>

</div>
</div>
<a class="anchor" id="ga81bc7bab09f91f6524dd81c8551e4cf0"></a><!-- doxytag: member="MYSQL_BIN_LOG::close" ref="ga81bc7bab09f91f6524dd81c8551e4cf0" args="(uint exiting)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__Binary__Log.html#ga22e829bf97dfac49c3b05a2cbdbaf7cb">MYSQL_BIN_LOG::close</a> </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>exiting</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Close the log file.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">exiting</td><td>Bitmask for one or more of the following bits:<ul>
<li>LOG_CLOSE_INDEX : if we should close the index file</li>
<li>LOG_CLOSE_TO_BE_OPENED : if we intend to call open at once after close.</li>
<li>LOG_CLOSE_STOP_EVENT : write a 'stop' event to the log</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>One can do an open on the object at once after doing a close. The internal structures are not freed until <a class="el" href="group__Binary__Log.html#ga2d8c70fe2db7fc6a5ffba006997e9064">cleanup()</a> is called </dd></dl>

<p>Reimplemented from <a class="el" href="classMYSQL__LOG.html">MYSQL_LOG</a>.</p>

</div>
</div>
<a class="anchor" id="gad5cf0683506dfdcc484155c676786860"></a><!-- doxytag: member="MYSQL_BIN_LOG::close_crash_safe_index_file" ref="gad5cf0683506dfdcc484155c676786860" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#gad5cf0683506dfdcc484155c676786860">MYSQL_BIN_LOG::close_crash_safe_index_file</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Close the crash safe index file.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>The crash safe file is just closed, is not deleted. Because it is moved to index file later on. </dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga94fdcfcfb5d2c85ca2a114ad2115b20e"></a><!-- doxytag: member="MYSQL_BIN_LOG::commit" ref="ga94fdcfcfb5d2c85ca2a114ad2115b20e" args="(THD *thd, bool all)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TC_LOG::enum_result <a class="el" href="group__Binary__Log.html#ga94fdcfcfb5d2c85ca2a114ad2115b20e">MYSQL_BIN_LOG::commit</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Commit the transaction in the transaction coordinator.</p>
<p>This function will commit the sessions transaction in the binary log and in the storage engines (by calling <code>ha_commit_low</code>). If the transaction was successfully logged (or not successfully unlogged) but the commit in the engines did not succed, there is a risk of inconsistency between the engines and the binary log.</p>
<p>For binary log group commit, the commit is separated into three parts:</p>
<p>1. First part consists of filling the necessary caches and finalizing them (if they need to be finalized). After this, nothing is added to any of the caches.</p>
<p>2. Second part execute an ordered flush and commit. This will be done using the group commit functionality in ordered_commit.</p>
<p>3. Third part checks any errors resulting from the ordered commit and handles them appropriately.</p>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">1</td><td>error, transaction was neither logged nor committed </td></tr>
    <tr><td class="paramname">2</td><td>error, transaction was logged but not committed </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classTC__LOG.html#a3f9ef43db745a798f8b361eb0b93ff22">TC_LOG</a>.</p>

</div>
</div>
<a class="anchor" id="ga80a5419e22b84b8ca2f3595cbf75fa67"></a><!-- doxytag: member="binlog.cc::ending_single_stmt_trans" ref="ga80a5419e22b84b8ca2f3595cbf75fa67" args="(THD *thd, const bool all)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga80a5419e22b84b8ca2f3595cbf75fa67">ending_single_stmt_trans</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function checks if a single statement transaction is about to commit or not.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The client thread that executed the current statement. </td></tr>
    <tr><td class="paramname">all</td><td>Committing a transaction (i.e. TRUE) or a statement (i.e. FALSE). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if committing a single statement transaction, otherwise <code>false</code>. </dd></dl>

</div>
</div>
<a class="anchor" id="gaad02774240e19d361a32bd35c9db60cb"></a><!-- doxytag: member="binlog.cc::ending_trans" ref="gaad02774240e19d361a32bd35c9db60cb" args="(THD *thd, const bool all)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#gaad02774240e19d361a32bd35c9db60cb">ending_trans</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function checks if a transaction, either a multi-statement or a single statement transaction is about to commit or not.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The client thread that executed the current statement. </td></tr>
    <tr><td class="paramname">all</td><td>Committing a transaction (i.e. TRUE) or a statement (i.e. FALSE). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if committing a transaction, otherwise <code>false</code>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga71a83004e5774879856189f84d00094f"></a><!-- doxytag: member="Stage_manager::enroll_for" ref="ga71a83004e5774879856189f84d00094f" args="(StageID stage, THD *first, mysql_mutex_t *stage_mutex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga71a83004e5774879856189f84d00094f">Stage_manager::enroll_for</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classStage__manager.html#a28879837525f3786d4bcb6f330f4ac69">StageID</a>&#160;</td>
          <td class="paramname"><em>stage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mysql_mutex_t *&#160;</td>
          <td class="paramname"><em>stage_mutex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enroll a set of sessions for a stage.</p>
<p>This will queue the session thread for writing and flushing.</p>
<p>If the thread being queued is assigned as stage leader, it will return immediately.</p>
<p>If wait_if_follower is true the thread is not the stage leader, the thread will be wait for the queue to be processed by the leader before it returns. In DBUG-ON version the follower marks is preempt status as ready.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>Stage identifier for the queue to append to. </td></tr>
    <tr><td class="paramname">first</td><td>Queue to append. </td></tr>
    <tr><td class="paramname">stage_mutex</td><td>Pointer to the currently held stage mutex, or NULL if we're not in a stage.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Thread is stage leader. </td></tr>
    <tr><td class="paramname">false</td><td>Thread was not stage leader and processing has been done. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga254675ae9d8f6f0a7b48d7520ab16eea"></a><!-- doxytag: member="Stage_manager::Mutex_queue::fetch_and_empty" ref="ga254675ae9d8f6f0a7b48d7520ab16eea" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">THD * <a class="el" href="group__Binary__Log.html#ga254675ae9d8f6f0a7b48d7520ab16eea">Stage_manager::Mutex_queue::fetch_and_empty</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Fetch the entire queue for a stage.</p>
<p>This will fetch the entire queue in one go. </p>

</div>
</div>
<a class="anchor" id="ga3367fa8c1daced18065f6b9dea5385fe"></a><!-- doxytag: member="binlog_cache_data::finalize" ref="ga3367fa8c1daced18065f6b9dea5385fe" args="(THD *thd, Log_event *end_event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga3367fa8c1daced18065f6b9dea5385fe">binlog_cache_data::finalize</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLog__event.html">Log_event</a> *&#160;</td>
          <td class="paramname"><em>end_event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function finalizes the cache preparing for commit or rollback.</p>
<p>The function just writes all the necessary events to the cache but does not flush the data to the binary log file. That is the role of the <a class="el" href="group__Binary__Log.html#ga302d2ea7bfcbea015c329edacdac6c5a">binlog_cache_data::flush</a> function.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__Binary__Log.html#ga302d2ea7bfcbea015c329edacdac6c5a">binlog_cache_data::flush</a></dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The thread whose transaction should be flushed </td></tr>
    <tr><td class="paramname">cache_data</td><td>Pointer to the cache </td></tr>
    <tr><td class="paramname">end_ev</td><td>The end event either commit/rollback</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>nonzero if an error pops up when flushing the cache. </dd></dl>

</div>
</div>
<a class="anchor" id="gab8925923df0bf9cd07f7fcaf45f8db16"></a><!-- doxytag: member="MYSQL_BIN_LOG::find_first_log_not_in_gtid_set" ref="gab8925923df0bf9cd07f7fcaf45f8db16" args="(char *binlog_file_name, const Gtid_set *gtid_set, Gtid *first_gtid, const char **errmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#gab8925923df0bf9cd07f7fcaf45f8db16">MYSQL_BIN_LOG::find_first_log_not_in_gtid_set</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>binlog_file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classGtid__set.html">Gtid_set</a> *&#160;</td>
          <td class="paramname"><em>gtid_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structGtid.html">Gtid</a> *&#160;</td>
          <td class="paramname"><em>first_gtid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>errmsg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find the oldest binary log that contains any GTID that is not in the given gtid set.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">binlog_file_name,the</td><td>file name of oldest binary log found </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gtid_set,the</td><td>given gtid set </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">first_gtid,the</td><td>first GTID information from the binary log file returned at binlog_file_name </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errmsg,the</td><td>error message outputted, which is left untouched if the function returns false </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>false on success, true on error. </dd></dl>

</div>
</div>
<a class="anchor" id="ga245bb1e482896f726e11719666f2394a"></a><!-- doxytag: member="MYSQL_BIN_LOG::find_log_pos" ref="ga245bb1e482896f726e11719666f2394a" args="(LOG_INFO *linfo, const char *log_name, bool need_lock_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga245bb1e482896f726e11719666f2394a">MYSQL_BIN_LOG::find_log_pos</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structst__log__info.html">LOG_INFO</a> *&#160;</td>
          <td class="paramname"><em>linfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>log_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_lock_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find the position in the log-index-file for the given log name.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">linfo</td><td>The found log file name will be stored here, along with the byte offset of the next log file name in the index file. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">log_name</td><td>Filename to find in the index file, or NULL if we want to read the first entry. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">need_lock_index</td><td>If false, this function acquires LOCK_index; otherwise the lock should already be held by the caller.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>On systems without the truncate function the file will end with one or more empty lines. These will be ignored when reading the file.</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">LOG_INFO_EOF</td><td>End of log-index-file found </td></tr>
    <tr><td class="paramname">LOG_INFO_IO</td><td>Got IO error while reading file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8ed66e95398bcafa143ca8ad16860711"></a><!-- doxytag: member="MYSQL_BIN_LOG::find_next_log" ref="ga8ed66e95398bcafa143ca8ad16860711" args="(LOG_INFO *linfo, bool need_lock_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga8ed66e95398bcafa143ca8ad16860711">MYSQL_BIN_LOG::find_next_log</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structst__log__info.html">LOG_INFO</a> *&#160;</td>
          <td class="paramname"><em>linfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_lock_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find the position in the log-index-file for the given log name.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">linfo</td><td>The filename will be stored here, along with the byte offset of the next filename in the index file.</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">need_lock_index</td><td>If true, LOCK_index will be acquired; otherwise it should already be held by the caller.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>Before calling this function, one has to call <a class="el" href="group__Binary__Log.html#ga245bb1e482896f726e11719666f2394a">find_log_pos()</a> to set up 'linfo'</li>
<li>Mutex needed because we need to make sure the file pointer does not move from under our feet</li>
</ul>
</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">LOG_INFO_EOF</td><td>End of log-index-file found </td></tr>
    <tr><td class="paramname">LOG_INFO_IO</td><td>Got IO error while reading file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga302d2ea7bfcbea015c329edacdac6c5a"></a><!-- doxytag: member="binlog_cache_data::flush" ref="ga302d2ea7bfcbea015c329edacdac6c5a" args="(THD *thd, my_off_t *bytes, bool *wrote_xid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga302d2ea7bfcbea015c329edacdac6c5a">binlog_cache_data::flush</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">my_off_t *&#160;</td>
          <td class="paramname"><em>bytes_written</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>wrote_xid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flush caches to the binary log.</p>
<p>If the cache is finalized, the cache will be flushed to the binary log file. If the cache is not finalized, nothing will be done.</p>
<p>If flushing fails for any reason, an error will be reported and the cache will be reset. Flushing can fail in two circumstances:</p>
<ul>
<li>It was not possible to write the cache to the file. In this case, it does not make sense to keep the cache.</li>
</ul>
<ul>
<li>The cache was successfully written to disk but post-flush actions (such as binary log rotation) failed. In this case, the cache is already written to disk and there is no reason to keep it.</li>
</ul>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__Binary__Log.html#ga3367fa8c1daced18065f6b9dea5385fe">binlog_cache_data::finalize</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gae40c4dc6b0b8986a50661b28df3a6fa3"></a><!-- doxytag: member="MYSQL_BIN_LOG::flush_and_sync" ref="gae40c4dc6b0b8986a50661b28df3a6fa3" args="(const bool force=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#gae40c4dc6b0b8986a50661b28df3a6fa3">MYSQL_BIN_LOG::flush_and_sync</a> </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>force</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flush binlog cache and synchronize to disk.</p>
<p>This function flushes events in binlog cache to binary log file, it will do synchronizing according to the setting of system variable 'sync_binlog'. If file is synchronized, <code>synced</code> will be set to 1, otherwise 0.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">synced</td><td>if not NULL, set to 1 if file is synchronized, otherwise 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">force</td><td>if TRUE, ignores the 'sync_binlog' and synchronizes the file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">other</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaa6d2bcbece5df8c93fe833e0a58f06d0"></a><!-- doxytag: member="binlog.cc::gtid_empty_group_log_and_cleanup" ref="gaa6d2bcbece5df8c93fe833e0a58f06d0" args="(THD *thd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#gaa6d2bcbece5df8c93fe833e0a58f06d0">gtid_empty_group_log_and_cleanup</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The function logs an empty group with GTID and performs cleanup. Its logic wrt GTID is equivalent to one of binlog_commit(). It's called at the end of statement execution in case binlog_commit() was skipped. Such cases are due ineffective binlogging incl an empty group re-execution.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The thread handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>nonzero if an error pops up. </dd></dl>

</div>
</div>
<a class="anchor" id="ga43ef27d48e9ff7dbc2c0d75f481acbc2"></a><!-- doxytag: member="MYSQL_BIN_LOG::init_gtid_sets" ref="ga43ef27d48e9ff7dbc2c0d75f481acbc2" args="(Gtid_set *gtid_set, Gtid_set *lost_groups, Gtid *last_gtid, bool verify_checksum, bool need_lock, bool is_server_starting=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga43ef27d48e9ff7dbc2c0d75f481acbc2">MYSQL_BIN_LOG::init_gtid_sets</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classGtid__set.html">Gtid_set</a> *&#160;</td>
          <td class="paramname"><em>gtid_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classGtid__set.html">Gtid_set</a> *&#160;</td>
          <td class="paramname"><em>lost_groups</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structGtid.html">Gtid</a> *&#160;</td>
          <td class="paramname"><em>last_gtid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verify_checksum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_server_starting</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads the set of all GTIDs in the binary log, and the set of all lost GTIDs in the binary log, and stores each set in respective argument.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">gtid_set</td><td>Will be filled with all GTIDs in this binary log. </td></tr>
    <tr><td class="paramname">lost_groups</td><td>Will be filled with all GTIDs in the <a class="el" href="classPrevious__gtids__log__event.html">Previous_gtids_log_event</a> of the first binary log that has a <a class="el" href="classPrevious__gtids__log__event.html">Previous_gtids_log_event</a>. </td></tr>
    <tr><td class="paramname">last_gtid</td><td>Will be filled with the last availble GTID information in the binary/relay log files. </td></tr>
    <tr><td class="paramname">verify_checksum</td><td>If true, checksums will be checked. </td></tr>
    <tr><td class="paramname">need_lock</td><td>If true, LOCK_log, LOCK_index, and global_sid_lock-&gt;wrlock are acquired; otherwise they are asserted to be taken already. </td></tr>
    <tr><td class="paramname">is_server_starting</td><td>True if the server is starting. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>false on success, true on error. </dd></dl>

</div>
</div>
<a class="anchor" id="gaac641bdabee70ba4bd377e06e1853fcb"></a><!-- doxytag: member="MYSQL_BIN_LOG::is_active" ref="gaac641bdabee70ba4bd377e06e1853fcb" args="(const char *log_file_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#gaac641bdabee70ba4bd377e06e1853fcb">MYSQL_BIN_LOG::is_active</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>log_file_name_arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check if we are writing/reading to the given log file. </p>

</div>
</div>
<a class="anchor" id="ga1d6091ef19ba4fb6819e758344298210"></a><!-- doxytag: member="binlog.cc::log_loaded_block" ref="ga1d6091ef19ba4fb6819e758344298210" args="(IO_CACHE *file)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga1d6091ef19ba4fb6819e758344298210">log_loaded_block</a> </td>
          <td>(</td>
          <td class="paramtype">IO_CACHE *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Load data's io cache specific hook to be executed before a chunk of data is being read into the cache's buffer The fuction instantianates and writes into the binlog replication events along LOAD DATA processing.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>pointer to io-cache </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga94f694096c1ef28962d9d7936d2d9a1e"></a><!-- doxytag: member="MYSQL_BIN_LOG::make_log_name" ref="ga94f694096c1ef28962d9d7936d2d9a1e" args="(char *buf, const char *log_ident)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__Binary__Log.html#ga94f694096c1ef28962d9d7936d2d9a1e">MYSQL_BIN_LOG::make_log_name</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>log_ident</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a new log file name.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>buf of at least FN_REFLEN where new name is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If file name will be longer then FN_REFLEN it will be truncated </dd></dl>

</div>
</div>
<a class="anchor" id="gab57cd148796a62181465bb25db0e236c"></a><!-- doxytag: member="MYSQL_BIN_LOG::move_crash_safe_index_file_to_index_file" ref="gab57cd148796a62181465bb25db0e236c" args="(bool need_lock_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#gab57cd148796a62181465bb25db0e236c">MYSQL_BIN_LOG::move_crash_safe_index_file_to_index_file</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_lock_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Move crash safe index file to index file.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">need_lock_index</td><td>If true, LOCK_index will be acquired; otherwise it should already be held.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">-1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0490669ea3aef1d30fa41d44079c8cb2"></a><!-- doxytag: member="binlog.cc::mysql_show_binlog_events" ref="ga0490669ea3aef1d30fa41d44079c8cb2" args="(THD *thd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga0490669ea3aef1d30fa41d44079c8cb2">mysql_show_binlog_events</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Execute a SHOW BINLOG EVENTS statement.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Pointer to THD object for the client thread executing the statement.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga44de4e3109fc4d50d4968191ab0f3544"></a><!-- doxytag: member="MYSQL_BIN_LOG::open_binlog" ref="ga44de4e3109fc4d50d4968191ab0f3544" args="(const char *opt_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga44de4e3109fc4d50d4968191ab0f3544">MYSQL_BIN_LOG::open_binlog</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>opt_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>keep in-memory list of prepared transactions (add to list in log(), remove on unlog()) and copy it to the new binlog if rotated but let's check the behaviour of tc_log_page_waits first! </dd></dl>

</div>
</div>
<a class="anchor" id="ga1eb09393ab56b2ba8a7620cbd4cb34b9"></a><!-- doxytag: member="MYSQL_BIN_LOG::open_binlog" ref="ga1eb09393ab56b2ba8a7620cbd4cb34b9" args="(const char *log_name, const char *new_name, enum cache_type io_cache_type_arg, ulong max_size, bool null_created, bool need_lock_index, bool need_sid_lock, Format_description_log_event *extra_description_event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga44de4e3109fc4d50d4968191ab0f3544">MYSQL_BIN_LOG::open_binlog</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>log_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum cache_type&#160;</td>
          <td class="paramname"><em>io_cache_type_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulong&#160;</td>
          <td class="paramname"><em>max_size_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>null_created_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_lock_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_sid_lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classFormat__description__log__event.html">Format_description_log_event</a> *&#160;</td>
          <td class="paramname"><em>extra_description_event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a new binary log. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">log_name</td><td>Name of binlog </td></tr>
    <tr><td class="paramname">new_name</td><td>Name of binlog, too. todo: what's the difference between new_name and log_name? </td></tr>
    <tr><td class="paramname">io_cache_type_arg</td><td>Specifies how the IO cache is opened: read-only or read-write. </td></tr>
    <tr><td class="paramname">max_size</td><td>The size at which this binlog will be rotated. </td></tr>
    <tr><td class="paramname">null_created</td><td>If false, and a <a class="el" href="classFormat__description__log__event.html">Format_description_log_event</a> is written, then the <a class="el" href="classFormat__description__log__event.html">Format_description_log_event</a> will have the timestamp 0. Otherwise, it the timestamp will be the time when the event was written to the log. </td></tr>
    <tr><td class="paramname">need_lock_index</td><td>If true, LOCK_index is acquired; otherwise LOCK_index must be taken by the caller. </td></tr>
    <tr><td class="paramname">need_sid_lock</td><td>If true, the read lock on global_sid_lock will be acquired. Otherwise, the caller must hold the read lock on global_sid_lock.</td></tr>
  </table>
  </dd>
</dl>
<p>Open a (new) binlog file.</p>
<ul>
<li>Open the log file and the index file. Register the new file name in it</li>
<li>When calling this when the file is in use, you must have a locks on LOCK_log and LOCK_index.</li>
</ul>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">1</td><td>error </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000006">Todo:</a></b></dt><dd>: although this was introduced to appease valgrind when injecting emulated faults using fault_injection_registering_index it may be good to consider what actually happens when open_purge_index_file succeeds but register or sync fails.</dd></dl>
<p>Perhaps we might need the code below in MYSQL_LOG_BIN::cleanup for "real life" purposes as well?</p>

</div>
</div>
<a class="anchor" id="ga79ed24f2c1a0645530426f4346470781"></a><!-- doxytag: member="binlog.cc::open_binlog_file" ref="ga79ed24f2c1a0645530426f4346470781" args="(IO_CACHE *log, const char *log_file_name, const char **errmsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">File <a class="el" href="group__Binary__Log.html#ga79ed24f2c1a0645530426f4346470781">open_binlog_file</a> </td>
          <td>(</td>
          <td class="paramtype">IO_CACHE *&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>log_file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>errmsg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Open a single binary log file for reading. </p>

</div>
</div>
<a class="anchor" id="gac6d69e1ee6b9099429bd919af752a0eb"></a><!-- doxytag: member="MYSQL_BIN_LOG::open_crash_safe_index_file" ref="gac6d69e1ee6b9099429bd919af752a0eb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#gac6d69e1ee6b9099429bd919af752a0eb">MYSQL_BIN_LOG::open_crash_safe_index_file</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Open a (new) crash safe index file.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>The crash safe index file is a special file used for guaranteeing index file crash safe. </dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4789039161947fff76fa8250b120b7e3"></a><!-- doxytag: member="MYSQL_BIN_LOG::prepare" ref="ga4789039161947fff76fa8250b120b7e3" args="(THD *thd, bool all)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga4789039161947fff76fa8250b120b7e3">MYSQL_BIN_LOG::prepare</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Log a prepare record of the transaction to the storage engines.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Session to log transaction record for.</td></tr>
    <tr><td class="paramname">all</td><td><code>true</code> if an explicit commit or an implicit commit for a statement, <code>false</code> if an internal commit of the statement.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Error code on failure, zero on success. </dd></dl>

<p>Implements <a class="el" href="classTC__LOG.html#ab968f1e200f370127c3dcd0302d00968">TC_LOG</a>.</p>

</div>
</div>
<a class="anchor" id="gaff1889360685bd90b1d3ffba10ba3dba"></a><!-- doxytag: member="MYSQL_BIN_LOG::purge" ref="gaff1889360685bd90b1d3ffba10ba3dba" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__Binary__Log.html#gaff1889360685bd90b1d3ffba10ba3dba">MYSQL_BIN_LOG::purge</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The method executes logs purging routine.</p>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">nonzero</td><td>- error in rotating routine. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gac9f15d1126e85d2acca6e06c92ea60f1"></a><!-- doxytag: member="MYSQL_BIN_LOG::purge_first_log" ref="gac9f15d1126e85d2acca6e06c92ea60f1" args="(Relay_log_info *rli, bool included)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#gac9f15d1126e85d2acca6e06c92ea60f1">MYSQL_BIN_LOG::purge_first_log</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>included</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Delete relay log files prior to rli-&gt;group_relay_log_name (i.e. all logs which are not involved in a non-finished group (transaction)), remove them from the index file and start on next relay log.</p>
<p>IMPLEMENTATION</p>
<ul>
<li>You must hold rli-&gt;data_lock before calling this function, since it writes group_relay_log_pos and similar fields of <a class="el" href="classRelay__log__info.html">Relay_log_info</a>.</li>
<li>Protects index file with LOCK_index</li>
<li>Delete relevant relay log files</li>
<li>Copy all file names after these ones to the front of the index file</li>
<li>If the OS has truncate, truncate the file, else fill it with <br/>
'</li>
<li>Read the next file name from the index file and store in rli-&gt;linfo</li>
</ul>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rli</td><td>Relay log information </td></tr>
    <tr><td class="paramname">included</td><td>If false, all relay logs that are strictly before rli-&gt;group_relay_log_name are deleted ; if true, the latter is deleted too (i.e. all relay logs read by the SQL slave thread are deleted).</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>This is only called from the slave SQL thread when it has read all commands from a relay log and want to switch to a new relay log.</li>
<li>When this happens, we can be in an active transaction as a transaction can span over two relay logs (although it is always written as a single block to the master's binary log, hence cannot span over two master's binary logs).</li>
</ul>
</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">LOG_INFO_EOF</td><td>End of log-index-file found </td></tr>
    <tr><td class="paramname">LOG_INFO_SEEK</td><td>Could not allocate IO cache </td></tr>
    <tr><td class="paramname">LOG_INFO_IO</td><td>Got IO error while reading file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga5e04e209edd9b720574d2a34ed8fc117"></a><!-- doxytag: member="MYSQL_BIN_LOG::purge_logs" ref="ga5e04e209edd9b720574d2a34ed8fc117" args="(const char *to_log, bool included, bool need_lock_index, bool need_update_threads, ulonglong *decrease_log_space, bool auto_purge)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga5e04e209edd9b720574d2a34ed8fc117">MYSQL_BIN_LOG::purge_logs</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to_log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>included</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_lock_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_update_threads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulonglong *&#160;</td>
          <td class="paramname"><em>decrease_log_space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>auto_purge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove all logs before the given log from disk and from the index file.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">to_log</td><td>Delete all log file name before this file. </td></tr>
    <tr><td class="paramname">included</td><td>If true, to_log is deleted too. </td></tr>
    <tr><td class="paramname">need_lock_index</td><td></td></tr>
    <tr><td class="paramname">need_update_threads</td><td>If we want to update the log coordinates of all threads. False for relay logs, true otherwise. </td></tr>
    <tr><td class="paramname">freed_log_space</td><td>If not null, decrement this variable of the amount of log space freed </td></tr>
    <tr><td class="paramname">auto_purge</td><td>True if this is an automatic purge.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If any of the logs before the deleted one is in use, only purge logs up to this one.</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">LOG_INFO_EOF</td><td>to_log not found LOG_INFO_EMFILE too many files opened LOG_INFO_FATAL if any other than ENOENT error from mysql_file_stat() or mysql_file_delete() </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gac126e05bd18fabf135844faef05ff28c"></a><!-- doxytag: member="MYSQL_BIN_LOG::purge_logs_before_date" ref="gac126e05bd18fabf135844faef05ff28c" args="(time_t purge_time, bool auto_purge)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#gac126e05bd18fabf135844faef05ff28c">MYSQL_BIN_LOG::purge_logs_before_date</a> </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>purge_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>auto_purge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove all logs before the given file date from disk and from the index file.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread pointer </td></tr>
    <tr><td class="paramname">purge_time</td><td>Delete all log files before given date. </td></tr>
    <tr><td class="paramname">auto_purge</td><td>True if this is an automatic purge.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If any of the logs before the deleted one is in use, only purge logs up to this one.</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">LOG_INFO_PURGE_NO_ROTATE</td><td>Binary file that can't be rotated LOG_INFO_FATAL if any other than ENOENT error from mysql_file_stat() or mysql_file_delete() </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1f15ff584adebd77fd1bf4ebc88a68b6"></a><!-- doxytag: member="binlog.cc::purge_master_logs" ref="ga1f15ff584adebd77fd1bf4ebc88a68b6" args="(THD *thd, const char *to_log)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga1f15ff584adebd77fd1bf4ebc88a68b6">purge_master_logs</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to_log</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Execute a PURGE BINARY LOGS TO &lt;log&gt; command.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Pointer to THD object for the client thread executing the statement.</td></tr>
    <tr><td class="paramname">to_log</td><td>Name of the last log to purge.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga38f8e56905c5205bb8cf6268cd203cb2"></a><!-- doxytag: member="binlog.cc::purge_master_logs_before_date" ref="ga38f8e56905c5205bb8cf6268cd203cb2" args="(THD *thd, time_t purge_time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga38f8e56905c5205bb8cf6268cd203cb2">purge_master_logs_before_date</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>purge_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Execute a PURGE BINARY LOGS BEFORE &lt;date&gt; command.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Pointer to THD object for the client thread executing the statement.</td></tr>
    <tr><td class="paramname">purge_time</td><td>Date before which logs should be purged.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>success </td></tr>
    <tr><td class="paramname">TRUE</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga0e843aafa062a4ab987d5ff75d450c41"></a><!-- doxytag: member="MYSQL_BIN_LOG::recover" ref="ga0e843aafa062a4ab987d5ff75d450c41" args="(IO_CACHE *log, Format_description_log_event *fdle, my_off_t *valid_pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga0e843aafa062a4ab987d5ff75d450c41">MYSQL_BIN_LOG::recover</a> </td>
          <td>(</td>
          <td class="paramtype">IO_CACHE *&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classFormat__description__log__event.html">Format_description_log_event</a> *&#160;</td>
          <td class="paramname"><em>fdle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">my_off_t *&#160;</td>
          <td class="paramname"><em>valid_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>MYSQLD server recovers from last crashed binlog.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">log</td><td>IO_CACHE of the crashed binlog. </td></tr>
    <tr><td class="paramname">fdle</td><td><a class="el" href="classFormat__description__log__event.html">Format_description_log_event</a> of the crashed binlog. </td></tr>
    <tr><td class="paramname">valid_pos</td><td>The position of the last valid transaction or event(non-transaction) of the crashed binlog.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8453da69cf16851231e33586e8992ea4"></a><!-- doxytag: member="MYSQL_BIN_LOG::remove_logs_from_index" ref="ga8453da69cf16851231e33586e8992ea4" args="(LOG_INFO *linfo, bool need_update_threads)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga8453da69cf16851231e33586e8992ea4">MYSQL_BIN_LOG::remove_logs_from_index</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structst__log__info.html">LOG_INFO</a> *&#160;</td>
          <td class="paramname"><em>log_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_update_threads</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove logs from index file.</p>
<ul>
<li>To make crash safe, we copy the content of index file from index_file_start_offset recored in log_info to crash safe index file firstly and then move the crash safe index file to index file.</li>
</ul>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">linfo</td><td>Store here the found log file name and position to the NEXT log file name in the index file.</td></tr>
    <tr><td class="paramname">need_update_threads</td><td>If we want to update the log coordinates of all threads. False for relay logs, true otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">LOG_INFO_IO</td><td>Got IO error while reading/writing file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga585728a123b2a0b37d5777e79d435ccc"></a><!-- doxytag: member="MYSQL_BIN_LOG::reset_logs" ref="ga585728a123b2a0b37d5777e79d435ccc" args="(THD *thd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga585728a123b2a0b37d5777e79d435ccc">MYSQL_BIN_LOG::reset_logs</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Removes files, as part of a RESET MASTER or RESET SLAVE statement, by deleting all logs refered to in the index file. Then, it starts writing to a new log file.</p>
<p>The new index file will only contain this file.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If not called from slave thread, write start event to new log</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9590d29210bd03fce1b8f9effc7c2d2a"></a><!-- doxytag: member="MYSQL_BIN_LOG::rollback" ref="ga9590d29210bd03fce1b8f9effc7c2d2a" args="(THD *thd, bool all)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga9590d29210bd03fce1b8f9effc7c2d2a">MYSQL_BIN_LOG::rollback</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write a rollback record of the transaction to the binary log.</p>
<p>For binary log group commit, the rollback is separated into three parts:</p>
<p>1. First part consists of filling the necessary caches and finalizing them (if they need to be finalized). After a cache is finalized, nothing can be added to the cache.</p>
<p>2. Second part execute an ordered flush and commit. This will be done using the group commit functionality in <code>ordered_commit</code>.</p>
<p>Since we roll back the transaction early, we call <code>ordered_commit</code> with the <code>skip_commit</code> flag set. The <code>ha_commit_low</code> call inside <code>ordered_commit</code> will then not be called.</p>
<p>3. Third part checks any errors resulting from the flush and handles them appropriately.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>MYSQL_BIN_LOG::ordered_commit </dd>
<dd>
<a class="el" href="handler_8cc.html#a4a77fdd0e1d6bee79e29e7495c7d752a">ha_commit_low</a> </dd>
<dd>
ha_rollback_low</dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Session to commit </td></tr>
    <tr><td class="paramname">all</td><td>This is <code>true</code> if this is a real transaction rollback, and  otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Error code, or zero if there were no error. </dd></dl>

<p>Implements <a class="el" href="classTC__LOG.html#abf637f1bbf02c6f8e4f69aa2f5e2d362">TC_LOG</a>.</p>

</div>
</div>
<a class="anchor" id="ga2053b0b53a46eb5702b44966497c333f"></a><!-- doxytag: member="MYSQL_BIN_LOG::rotate" ref="ga2053b0b53a46eb5702b44966497c333f" args="(bool force_rotate, bool *check_purge)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga2053b0b53a46eb5702b44966497c333f">MYSQL_BIN_LOG::rotate</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force_rotate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>check_purge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The method executes rotation when LOCK_log is already acquired by the caller.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">force_rotate</td><td>caller can request the log rotation </td></tr>
    <tr><td class="paramname">check_purge</td><td>is set to true if rotation took place</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If rotation fails, for instance the server was unable to create a new log file, we still try to write an incident event to the current log.</dd>
<dd>
The caller must hold LOCK_log when invoking this function.</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">nonzero</td><td>- error in rotating routine. </td></tr>
  </table>
  </dd>
</dl>
<p>Be conservative... There are possible lost events (eg, failing to log the <a class="el" href="classExecute__load__query__log__event.html">Execute_load_query_log_event</a> on a LOAD DATA while using a non-transactional table)!</p>
<p>We give it a shot and try to write an incident event anyway to the current log.</p>

</div>
</div>
<a class="anchor" id="ga9f41b228c438fe7b4c710b8fdd780cfb"></a><!-- doxytag: member="MYSQL_BIN_LOG::rotate_and_purge" ref="ga9f41b228c438fe7b4c710b8fdd780cfb" args="(THD *thd, bool force_rotate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga9f41b228c438fe7b4c710b8fdd780cfb">MYSQL_BIN_LOG::rotate_and_purge</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force_rotate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The method is a shortcut of <code><a class="el" href="group__Binary__Log.html#ga2053b0b53a46eb5702b44966497c333f">rotate()</a></code> and <code><a class="el" href="group__Binary__Log.html#gaff1889360685bd90b1d3ffba10ba3dba">purge()</a></code>. LOCK_log is acquired prior to rotate and is released after it.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">force_rotate</td><td>caller can request the log rotation</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">nonzero</td><td>- error in rotating routine. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga5bbd66f9464d9a83f33fdcdba20d7d99"></a><!-- doxytag: member="MYSQL_BIN_LOG::set_crash_safe_index_file_name" ref="ga5bbd66f9464d9a83f33fdcdba20d7d99" args="(const char *base_file_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga5bbd66f9464d9a83f33fdcdba20d7d99">MYSQL_BIN_LOG::set_crash_safe_index_file_name</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>base_file_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the name of crash safe index file.</p>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">1</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga07a668f531f059316c8f17dfcecfd465"></a><!-- doxytag: member="binlog.cc::stmt_cannot_safely_rollback" ref="ga07a668f531f059316c8f17dfcecfd465" args="(const THD *thd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga07a668f531f059316c8f17dfcecfd465">stmt_cannot_safely_rollback</a> </td>
          <td>(</td>
          <td class="paramtype">const THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function checks if current statement cannot be rollded back safely.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The client thread that executed the current statement. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if cannot be safely rolled back, <code>false</code> otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0db7290468d8e62cd647323a0e9b5061"></a><!-- doxytag: member="binlog.cc::stmt_has_updated_trans_table" ref="ga0db7290468d8e62cd647323a0e9b5061" args="(const THD *thd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga0db7290468d8e62cd647323a0e9b5061">stmt_has_updated_trans_table</a> </td>
          <td>(</td>
          <td class="paramtype">const THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function checks if a transactional table was updated by the current statement.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The client thread that executed the current statement. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if a transactional table was updated, <code>false</code> otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1d647f955254c565dc33abf8caabdbab"></a><!-- doxytag: member="binlog.cc::trans_cannot_safely_rollback" ref="ga1d647f955254c565dc33abf8caabdbab" args="(const THD *thd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga1d647f955254c565dc33abf8caabdbab">trans_cannot_safely_rollback</a> </td>
          <td>(</td>
          <td class="paramtype">const THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function checks if a transaction cannot be rolled back safely.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The client thread that executed the current statement. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if cannot be safely rolled back, <code>false</code> otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga25239dc38f22eeef6e1aea243af6fd9a"></a><!-- doxytag: member="binlog.cc::trans_has_updated_trans_table" ref="ga25239dc38f22eeef6e1aea243af6fd9a" args="(const THD *thd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga25239dc38f22eeef6e1aea243af6fd9a">trans_has_updated_trans_table</a> </td>
          <td>(</td>
          <td class="paramtype">const THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function checks if a transactional table was updated by the current transaction.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The client thread that executed the current statement. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>true</code> if a transactional table was updated, <code>false</code> otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="gae0d03425fee2a702a9b4dfac7b9de4b1"></a><!-- doxytag: member="binlog_trx_cache_data::truncate" ref="gae0d03425fee2a702a9b4dfac7b9de4b1" args="(THD *thd, bool all)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#gae0d03425fee2a702a9b4dfac7b9de4b1">binlog_trx_cache_data::truncate</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function truncates the transactional cache upon committing or rolling back either a transaction or a statement.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The thread whose transaction should be flushed </td></tr>
    <tr><td class="paramname">cache_mngr</td><td>Pointer to the cache data to be flushed </td></tr>
    <tr><td class="paramname">all</td><td><code>true</code> means truncate the transaction, otherwise the statement must be truncated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>nonzero if an error pops up when truncating the transactional cache. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1b625b440aaf82241200b3980d94c6a9"></a><!-- doxytag: member="MYSQL_BIN_LOG::wait_for_update_bin_log" ref="ga1b625b440aaf82241200b3980d94c6a9" args="(THD *thd, const struct timespec *timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga1b625b440aaf82241200b3980d94c6a9">MYSQL_BIN_LOG::wait_for_update_bin_log</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timespec *&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wait until we get a signal that the binary log has been updated. Applies to master only.</p>
<p>NOTES </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>a THD struct </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>a pointer to a timespec; NULL means to wait w/o timeout. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if got signalled on update </td></tr>
    <tr><td class="paramname">non-0</td><td>if wait timeout elapsed </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>LOCK_log must be taken before calling this function. LOCK_log is being released while the thread is waiting. LOCK_log is released by the caller. </dd></dl>

</div>
</div>
<a class="anchor" id="ga10698ebc9afd7be839f7a69b7aaac141"></a><!-- doxytag: member="MYSQL_BIN_LOG::wait_for_update_relay_log" ref="ga10698ebc9afd7be839f7a69b7aaac141" args="(THD *thd, const struct timespec *timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__Binary__Log.html#ga10698ebc9afd7be839f7a69b7aaac141">MYSQL_BIN_LOG::wait_for_update_relay_log</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timespec *&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wait until we get a signal that the relay log has been updated.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Thread variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>a pointer to a timespec; NULL means to wait w/o timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if got signalled on update </td></tr>
    <tr><td class="paramname">non-0</td><td>if wait timeout elapsed</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>One must have a lock on LOCK_log before calling this function. </dd></dl>

</div>
</div>
<a class="anchor" id="gac9dbdae7075b4f8bdef3b78d411d6481"></a><!-- doxytag: member="MYSQL_BIN_LOG::write_cache" ref="gac9dbdae7075b4f8bdef3b78d411d6481" args="(THD *thd, class binlog_cache_data *binlog_cache_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#gac9dbdae7075b4f8bdef3b78d411d6481">MYSQL_BIN_LOG::write_cache</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">class <a class="el" href="classbinlog__cache__data.html">binlog_cache_data</a> *&#160;</td>
          <td class="paramname"><em>binlog_cache_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write a cached log entry to the binary log.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread variable </td></tr>
    <tr><td class="paramname">cache</td><td>The cache to copy to the binlog </td></tr>
    <tr><td class="paramname">incident</td><td>Defines if an incident event should be created to notify that some non-transactional changes did not get into the binlog. </td></tr>
    <tr><td class="paramname">prepared</td><td>Defines if a transaction is part of a 2-PC.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>We only come here if there is something in the cache. </dd>
<dd>
The thing in the cache is always a complete transaction. </dd>
<dd>
'cache' needs to be reinitialized after this functions returns. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9c19cd666a1a517386dedd4078dd93e7"></a><!-- doxytag: member="MYSQL_BIN_LOG::write_event" ref="ga9c19cd666a1a517386dedd4078dd93e7" args="(Log_event *event_info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#ga9c19cd666a1a517386dedd4078dd93e7">MYSQL_BIN_LOG::write_event</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLog__event.html">Log_event</a> *&#160;</td>
          <td class="paramname"><em>event_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write an event to the binary log. </p>

</div>
</div>
<a class="anchor" id="gac6023a97a6c19c5e160f9dd975136474"></a><!-- doxytag: member="MYSQL_BIN_LOG::write_incident" ref="gac6023a97a6c19c5e160f9dd975136474" args="(THD *thd, bool need_lock_log, bool do_flush_and_sync=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#gac6023a97a6c19c5e160f9dd975136474">MYSQL_BIN_LOG::write_incident</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_lock_log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>do_flush_and_sync</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates an incident event and writes it to the binary log.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread variable </td></tr>
    <tr><td class="paramname">ev</td><td>Incident event to be written </td></tr>
    <tr><td class="paramname">lock</td><td>If the binary lock should be locked or not</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>error </td></tr>
    <tr><td class="paramname">1</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaecc977a50e24a4f1e144d056689a645a"></a><!-- doxytag: member="MYSQL_BIN_LOG::write_incident" ref="gaecc977a50e24a4f1e144d056689a645a" args="(Incident_log_event *ev, bool need_lock_log, bool do_flush_and_sync=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="group__Binary__Log.html#gac6023a97a6c19c5e160f9dd975136474">MYSQL_BIN_LOG::write_incident</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classIncident__log__event.html">Incident_log_event</a> *&#160;</td>
          <td class="paramname"><em>ev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_lock_log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>do_flush_and_sync</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Writes an incident event to the binary log.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ev</td><td>Incident event to be written </td></tr>
    <tr><td class="paramname">need_lock_log</td><td>If true, will acquire LOCK_log; otherwise the caller should already have acquired LOCK_log.  If true, will call <a class="el" href="group__Binary__Log.html#gae40c4dc6b0b8986a50661b28df3a6fa3">flush_and_sync()</a>, <a class="el" href="group__Binary__Log.html#ga2053b0b53a46eb5702b44966497c333f">rotate()</a> and <a class="el" href="group__Binary__Log.html#gaff1889360685bd90b1d3ffba10ba3dba">purge()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>error </td></tr>
    <tr><td class="paramname">true</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="gaf6ecc9c0253b423bc48289c779e9c010"></a><!-- doxytag: member="binlog.cc::binlog_storage_engine" ref="gaf6ecc9c0253b423bc48289c779e9c010" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct st_mysql_storage_engine binlog_storage_engine</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{ MYSQL_HANDLERTON_INTERFACE_VERSION }
</pre></div>
</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 16 2015 12:34:47 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
