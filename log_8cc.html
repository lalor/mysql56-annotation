<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: log.cc File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">log.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>logging of commands  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;my_global.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="sql__priv_8h_source.html">sql_priv.h</a>&quot;</code><br/>
<code>#include &quot;log.h&quot;</code><br/>
<code>#include &quot;sql_base.h&quot;</code><br/>
<code>#include &quot;sql_delete.h&quot;</code><br/>
<code>#include &quot;sql_parse.h&quot;</code><br/>
<code>#include &quot;sql_time.h&quot;</code><br/>
<code>#include &quot;tztime.h&quot;</code><br/>
<code>#include &quot;sql_acl.h&quot;</code><br/>
<code>#include &quot;sql_audit.h&quot;</code><br/>
<code>#include &quot;mysql/service_my_plugin_log.h&quot;</code><br/>
<code>#include &lt;my_dir.h&gt;</code><br/>
<code>#include &lt;stdarg.h&gt;</code><br/>
<code>#include &lt;m_ctype.h&gt;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSlow__query__log__table__intact.html">Slow_query_log_table_intact</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGeneral__log__table__intact.html">General_log_table_intact</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSilence__log__table__errors.html">Silence_log_table_errors</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a850e71de3b212f1933df4c118b13c68a"></a><!-- doxytag: member="log.cc::MAX_LOG_BUFFER_SIZE" ref="a850e71de3b212f1933df4c118b13c68a" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_LOG_BUFFER_SIZE</b>&#160;&#160;&#160;1024</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae6e20e9953b4506ab8c5b45ef69272f9"></a><!-- doxytag: member="log.cc::MAX_TIME_SIZE" ref="ae6e20e9953b4506ab8c5b45ef69272f9" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_TIME_SIZE</b>&#160;&#160;&#160;32</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#acbf0e28f9f40fb9c44a266a7f739ce82">purge_log_get_error_code</a> (int res)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#ac84378bc7a2bcbf6944f5c8baba795c8">make_log_name</a> (char *buff, const char *name, const char *log_ext)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a211be2c7ee7d9b4d4ba3d72ef75b41ed"></a><!-- doxytag: member="log.cc::check_if_log_table" ref="a211be2c7ee7d9b4d4ba3d72ef75b41ed" args="(size_t db_len, const char *db, size_t table_name_len, const char *table_name, bool check_if_opened)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>check_if_log_table</b> (size_t db_len, const char *db, size_t table_name_len, const char *table_name, bool check_if_opened)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed0114b6db8877f59a68e888c6f4b4aa"></a><!-- doxytag: member="log.cc::error_log_print" ref="aed0114b6db8877f59a68e888c6f4b4aa" args="(enum loglevel level, const char *format, va_list args)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>error_log_print</b> (enum loglevel level, const char *format, va_list args)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab34523df2103fcc14e2c6d6bdc59ebf3"></a><!-- doxytag: member="log.cc::slow_log_print" ref="ab34523df2103fcc14e2c6d6bdc59ebf3" args="(THD *thd, const char *query, uint query_length)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>slow_log_print</b> (THD *thd, const char *query, uint query_length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a488e13712728c6c3d7908933d72791c3"></a><!-- doxytag: member="log.cc::general_log_print" ref="a488e13712728c6c3d7908933d72791c3" args="(THD *thd, enum enum_server_command command, const char *format,...)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>general_log_print</b> (THD *thd, enum enum_server_command command, const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeb4408efac1a575b1e1624283ccb56f3"></a><!-- doxytag: member="log.cc::general_log_write" ref="aeb4408efac1a575b1e1624283ccb56f3" args="(THD *thd, enum enum_server_command command, const char *query, uint query_length)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>general_log_write</b> (THD *thd, enum enum_server_command command, const char *query, uint query_length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43f77974d5ef164333b8688f4b79e715"></a><!-- doxytag: member="log.cc::sql_perror" ref="a43f77974d5ef164333b8688f4b79e715" args="(const char *message)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>sql_perror</b> (const char *message)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adcacab6b025b905dfcf45a323710ad21"></a><!-- doxytag: member="log.cc::reopen_fstreams" ref="adcacab6b025b905dfcf45a323710ad21" args="(const char *filename, FILE *outstream, FILE *errstream)" -->
my_bool&#160;</td><td class="memItemRight" valign="bottom"><b>reopen_fstreams</b> (const char *filename, FILE *outstream, FILE *errstream)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac875f45e5d5da655e363eff6e6cc9903"></a><!-- doxytag: member="log.cc::flush_error_log" ref="ac875f45e5d5da655e363eff6e6cc9903" args="()" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>flush_error_log</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#ad80689f91c205262ba00a47a1435578f">vprint_msg_to_log</a> (enum loglevel level, const char *format, va_list args)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e88c1f62a9e97f45eb01515c9a31e3b"></a><!-- doxytag: member="log.cc::sql_print_error" ref="a8e88c1f62a9e97f45eb01515c9a31e3b" args="(const char *format,...)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>sql_print_error</b> (const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8cb7d17584b91c920e91c9c188b129bf"></a><!-- doxytag: member="log.cc::sql_print_warning" ref="a8cb7d17584b91c920e91c9c188b129bf" args="(const char *format,...)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>sql_print_warning</b> (const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5792800fe1276804c39a02bc34614020"></a><!-- doxytag: member="log.cc::sql_print_information" ref="a5792800fe1276804c39a02bc34614020" args="(const char *format,...)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>sql_print_information</b> (const char *format,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3a645ed07038ca8ca3aeae825ef567ff"></a><!-- doxytag: member="log.cc::my_plugin_log_message" ref="a3a645ed07038ca8ca3aeae825ef567ff" args="(MYSQL_PLUGIN *plugin_ptr, plugin_log_level level, const char *format,...)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>my_plugin_log_message</b> (MYSQL_PLUGIN *plugin_ptr, plugin_log_level level, const char *format,...)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af49efac2c6e39038b2b8d14c36c17484"></a><!-- doxytag: member="log.cc::logger" ref="af49efac2c6e39038b2b8d14c36c17484" args="" -->
<a class="el" href="classLOGGER.html">LOGGER</a>&#160;</td><td class="memItemRight" valign="bottom"><b>logger</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">sql_print_message_func&#160;</td><td class="memItemRight" valign="bottom"><b>sql_print_message_handlers</b> [3]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad6e642c4df63a153bcb98139fd6a8008"></a><!-- doxytag: member="log.cc::tc_log_page_waits" ref="ad6e642c4df63a153bcb98139fd6a8008" args="" -->
ulong&#160;</td><td class="memItemRight" valign="bottom"><b>tc_log_page_waits</b> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92325103c7cf08bc077e8ba10d7e8f89"></a><!-- doxytag: member="log.cc::tc_log" ref="a92325103c7cf08bc077e8ba10d7e8f89" args="" -->
<a class="el" href="classTC__LOG.html">TC_LOG</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>tc_log</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a06508ecce5ed4bb9a48556633cabfe99"></a><!-- doxytag: member="log.cc::tc_log_dummy" ref="a06508ecce5ed4bb9a48556633cabfe99" args="" -->
<a class="el" href="classTC__LOG__DUMMY.html">TC_LOG_DUMMY</a>&#160;</td><td class="memItemRight" valign="bottom"><b>tc_log_dummy</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6b6cc35d77d1c588c5d4cfc8cdf9717f"></a><!-- doxytag: member="log.cc::tc_log_mmap" ref="a6b6cc35d77d1c588c5d4cfc8cdf9717f" args="" -->
TC_LOG_MMAP&#160;</td><td class="memItemRight" valign="bottom"><b>tc_log_mmap</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>logging of commands </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000043">Todo:</a></b></dt><dd>Abort logging when we get an error in reading or writing log files </dd></dl>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac84378bc7a2bcbf6944f5c8baba795c8"></a><!-- doxytag: member="log.cc::make_log_name" ref="ac84378bc7a2bcbf6944f5c8baba795c8" args="(char *buff, const char *name, const char *log_ext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="log_8cc.html#ac84378bc7a2bcbf6944f5c8baba795c8">make_log_name</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>log_ext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create the name of the log specified.</p>
<p>This method forms a new path + file name for the log specified in <code>name</code>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">IN]</td><td>buff Location for building new string. </td></tr>
    <tr><td class="paramname">IN]</td><td>name Name of the log file. </td></tr>
    <tr><td class="paramname">IN]</td><td>log_ext The extension for the log (e.g. .log).</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to new string containing the name. </dd></dl>

</div>
</div>
<a class="anchor" id="acbf0e28f9f40fb9c44a266a7f739ce82"></a><!-- doxytag: member="log.cc::purge_log_get_error_code" ref="acbf0e28f9f40fb9c44a266a7f739ce82" args="(int res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint <a class="el" href="log_8cc.html#acbf0e28f9f40fb9c44a266a7f739ce82">purge_log_get_error_code</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>res</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>purge logs, master and slave sides both, related error code convertor. Called from <code>purge_error_message()</code>, <code><a class="el" href="group__Binary__Log.html#ga585728a123b2a0b37d5777e79d435ccc">MYSQL_BIN_LOG::reset_logs()</a></code> </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">res</td><td>an internal to purging routines error code</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the user level error code ER_* </dd></dl>

</div>
</div>
<a class="anchor" id="ad80689f91c205262ba00a47a1435578f"></a><!-- doxytag: member="log.cc::vprint_msg_to_log" ref="ad80689f91c205262ba00a47a1435578f" args="(enum loglevel level, const char *format, va_list args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="log_8cc.html#ad80689f91c205262ba00a47a1435578f">vprint_msg_to_log</a> </td>
          <td>(</td>
          <td class="paramtype">enum loglevel&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Prints a printf style message to the error log and, under NT, to the Windows event log.</p>
<p>This function prints the message into a buffer and then sends that buffer to other functions to write that message to other logging sources.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>The level of the msg significance </td></tr>
    <tr><td class="paramname">format</td><td>Printf style format of message </td></tr>
    <tr><td class="paramname">args</td><td>va_list list of arguments for the message</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The function always returns 0. The return value is present in the signature to be compatible with other logging routines, which could return an error (e.g. logging to the log tables) </dd></dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a452383cc341b71ecc3bc3cd8fb8ebdf3"></a><!-- doxytag: member="log.cc::sql_print_message_handlers" ref="a452383cc341b71ecc3bc3cd8fb8ebdf3" args="[3]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sql_print_message_func sql_print_message_handlers[3]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
  sql_print_information,
  sql_print_warning,
  sql_print_error
}
</pre></div>
</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 16 2015 12:34:46 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
