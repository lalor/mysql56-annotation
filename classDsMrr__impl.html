<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: DsMrr_impl Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">DsMrr_impl Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="DsMrr_impl" -->
<p><a href="classDsMrr__impl-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e2adbb5ad222fae25f0d16c506d516d"></a><!-- doxytag: member="DsMrr_impl::range_check_toggle_func_t" ref="a7e2adbb5ad222fae25f0d16c506d516d" args=")(bool on)" -->
typedef void(handler::*&#160;</td><td class="memItemRight" valign="bottom"><b>range_check_toggle_func_t</b> )(bool on)</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a63da49f2511507a66241265e90897775"></a><!-- doxytag: member="DsMrr_impl::init" ref="a63da49f2511507a66241265e90897775" args="(handler *h_arg, TABLE *table_arg)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>init</b> (<a class="el" href="classhandler.html">handler</a> *h_arg, <a class="el" href="structTABLE.html">TABLE</a> *table_arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDsMrr__impl.html#ade7283d68a19de82fd19ad836ac10506">dsmrr_init</a> (<a class="el" href="classhandler.html">handler</a> *h, <a class="el" href="structst__range__seq__if.html">RANGE_SEQ_IF</a> *seq_funcs, void *seq_init_param, uint n_ranges, uint mode, <a class="el" href="structst__handler__buffer.html">HANDLER_BUFFER</a> *buf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37d8684f4e71bf4b0b4f064546184417"></a><!-- doxytag: member="DsMrr_impl::dsmrr_close" ref="a37d8684f4e71bf4b0b4f064546184417" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>dsmrr_close</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDsMrr__impl.html#a186174fdee0ea701012e58c55a1e5618">reset</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDsMrr__impl.html#a444c0116a9c9b9eefb73195e8ad5c3e6">dsmrr_fill_buffer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afcc0a1f4f99e95737581fae0161b2527"></a><!-- doxytag: member="DsMrr_impl::dsmrr_next" ref="afcc0a1f4f99e95737581fae0161b2527" args="(char **range_info)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>dsmrr_next</b> (char **range_info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b61662dc18bf171f35e679c4c87eb64"></a><!-- doxytag: member="DsMrr_impl::dsmrr_info" ref="a2b61662dc18bf171f35e679c4c87eb64" args="(uint keyno, uint n_ranges, uint keys, uint *bufsz, uint *flags, Cost_estimate *cost)" -->
ha_rows&#160;</td><td class="memItemRight" valign="bottom"><b>dsmrr_info</b> (uint keyno, uint n_ranges, uint keys, uint *bufsz, uint *flags, <a class="el" href="classCost__estimate.html">Cost_estimate</a> *cost)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37a15cc5cafd27df60f13cc3b39c7476"></a><!-- doxytag: member="DsMrr_impl::dsmrr_info_const" ref="a37a15cc5cafd27df60f13cc3b39c7476" args="(uint keyno, RANGE_SEQ_IF *seq, void *seq_init_param, uint n_ranges, uint *bufsz, uint *flags, Cost_estimate *cost)" -->
ha_rows&#160;</td><td class="memItemRight" valign="bottom"><b>dsmrr_info_const</b> (uint keyno, <a class="el" href="structst__range__seq__if.html">RANGE_SEQ_IF</a> *seq, void *seq_init_param, uint n_ranges, uint *bufsz, uint *flags, <a class="el" href="classCost__estimate.html">Cost_estimate</a> *cost)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab9e54b21d0894065fe5964c1f9cc88ab"></a><!-- doxytag: member="DsMrr_impl::h" ref="ab9e54b21d0894065fe5964c1f9cc88ab" args="" -->
<a class="el" href="classhandler.html">handler</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>h</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed8fc84364868b01cb0d19537d5fa5b3"></a><!-- doxytag: member="DsMrr_impl::table" ref="aed8fc84364868b01cb0d19537d5fa5b3" args="" -->
<a class="el" href="structTABLE.html">TABLE</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>table</b></td></tr>
</table>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a444c0116a9c9b9eefb73195e8ad5c3e6"></a><!-- doxytag: member="DsMrr_impl::dsmrr_fill_buffer" ref="a444c0116a9c9b9eefb73195e8ad5c3e6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classDsMrr__impl.html#a444c0116a9c9b9eefb73195e8ad5c3e6">DsMrr_impl::dsmrr_fill_buffer</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DS-MRR: Fill the buffer with rowids and sort it by rowid</p>
<p>{This is an internal function of DiskSweep MRR implementation} Scan the MRR ranges and collect ROWIDs (or {ROWID, range_id} pairs) into buffer. When the buffer is full or scan is completed, sort the buffer by rowid and return.</p>
<p>The function assumes that rowids buffer is empty when it is invoked.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>Table handler</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>OK, the next portion of rowids is in the buffer, properly ordered </td></tr>
    <tr><td class="paramname">other</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ade7283d68a19de82fd19ad836ac10506"></a><!-- doxytag: member="DsMrr_impl::dsmrr_init" ref="ade7283d68a19de82fd19ad836ac10506" args="(handler *h, RANGE_SEQ_IF *seq_funcs, void *seq_init_param, uint n_ranges, uint mode, HANDLER_BUFFER *buf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classDsMrr__impl.html#ade7283d68a19de82fd19ad836ac10506">DsMrr_impl::dsmrr_init</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classhandler.html">handler</a> *&#160;</td>
          <td class="paramname"><em>h_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structst__range__seq__if.html">RANGE_SEQ_IF</a> *&#160;</td>
          <td class="paramname"><em>seq_funcs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>seq_init_param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>n_ranges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structst__handler__buffer.html">HANDLER_BUFFER</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DS-MRR: Initialize and start MRR scan</p>
<p>Initialize and start the MRR scan. Depending on the mode parameter, this may use default or DS-MRR implementation.</p>
<p>The DS-MRR implementation will use a second handler object (h2) for doing scan on the index:</p>
<ul>
<li>on the first call to this function the h2 handler will be created and h2 will be opened using the same index as the main handler is set to use. The index scan on the main index will be closed and it will be re-opened to read records from the table using either no key or the primary key. The h2 handler will be deleted when <a class="el" href="classDsMrr__impl.html#a186174fdee0ea701012e58c55a1e5618">reset()</a> is called (which should happen on the end of the statement).</li>
<li>when dsmrr_close() is called the index scan on h2 is closed.</li>
<li>on following calls to this function one of the following must be valid: a. if dsmrr_close has been called: the main handler (h) must be open on an index, h2 will be opened using this index, and the index on h will be closed and h will be re-opened to read reads from the table using either no key or the primary key. b. dsmrr_close has not been called: h2 will already be open, the main handler h must be set up to read records from the table (handler-&gt;inited is RND) either using the primary index or using no index at all.</li>
</ul>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">h_arg</td><td>Table handler to be used </td></tr>
    <tr><td class="paramname">seq_funcs</td><td>Interval sequence enumeration functions </td></tr>
    <tr><td class="paramname">seq_init_param</td><td>Interval sequence enumeration parameter </td></tr>
    <tr><td class="paramname">n_ranges</td><td>Number of ranges in the sequence. </td></tr>
    <tr><td class="paramname">mode</td><td>HA_MRR_* modes to use </td></tr>
    <tr><td class="paramname">buf</td><td>INOUT Buffer to use</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Ok, Scan started. </td></tr>
    <tr><td class="paramname">other</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a186174fdee0ea701012e58c55a1e5618"></a><!-- doxytag: member="DsMrr_impl::reset" ref="a186174fdee0ea701012e58c55a1e5618" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classDsMrr__impl.html#a186174fdee0ea701012e58c55a1e5618">DsMrr_impl::reset</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Resets the DS-MRR object to the state it had after being intialized.</p>
<p>If there is an open scan then this will be closed.</p>
<p>This function should be called by <a class="el" href="classhandler.html#a53d38f167906d8aaa9e560c71e595a42" title="Check handler usage and reset state of file to after &#39;open&#39;.">handler::ha_reset()</a> which is called when a statement is completed in order to make the handler object ready for re-use by a different statement. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="handler_8h_source.html">handler.h</a></li>
<li><a class="el" href="handler_8cc.html">handler.cc</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 16 2015 12:35:27 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
