<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: MDL_ticket Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">MDL_ticket Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="MDL_ticket" --><!-- doxytag: inherits="MDL_wait_for_subgraph" -->
<p><code>#include &lt;<a class="el" href="mdl_8h_source.html">mdl.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MDL_ticket:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMDL__ticket.png" usemap="#MDL_ticket_map" alt=""/>
  <map id="MDL_ticket_map" name="MDL_ticket_map">
<area href="classMDL__wait__for__subgraph.html" alt="MDL_wait_for_subgraph" shape="rect" coords="0,0,151,24"/>
</map>
 </div></div>

<p><a href="classMDL__ticket-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__ticket.html#ae66be0a78d1a420517eb0147b713e60a">has_pending_conflicting_lock</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7d65407df05caaf9928ed2894086d207"></a><!-- doxytag: member="MDL_ticket::get_ctx" ref="a7d65407df05caaf9928ed2894086d207" args="() const " -->
<a class="el" href="classMDL__context.html">MDL_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_ctx</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae63ad5e24e0a0fe98ad554383bfb9c2b"></a><!-- doxytag: member="MDL_ticket::is_upgradable_or_exclusive" ref="ae63ad5e24e0a0fe98ad554383bfb9c2b" args="() const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_upgradable_or_exclusive</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0986cf55b35bde7cc9d50249b3cf972f"></a><!-- doxytag: member="MDL_ticket::get_type" ref="a0986cf55b35bde7cc9d50249b3cf972f" args="() const " -->
enum_mdl_type&#160;</td><td class="memItemRight" valign="bottom"><b>get_type</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="accd5f8a9cad65e91bf49b4e349c733b7"></a><!-- doxytag: member="MDL_ticket::get_lock" ref="accd5f8a9cad65e91bf49b4e349c733b7" args="() const " -->
<a class="el" href="classMDL__lock.html">MDL_lock</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_lock</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__ticket.html#a4fd3f255fe828cbf0d95a5d02d70d302">downgrade_lock</a> (enum_mdl_type type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__ticket.html#abe2b39dc87e308b25ae170cdcbe10fbd">has_stronger_or_equal_type</a> (enum_mdl_type type) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4bf69838292e663ddb2f349718bbf56"></a><!-- doxytag: member="MDL_ticket::is_incompatible_when_granted" ref="ab4bf69838292e663ddb2f349718bbf56" args="(enum_mdl_type type) const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_incompatible_when_granted</b> (enum_mdl_type type) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7973c258920330e3499a6e9c5112446d"></a><!-- doxytag: member="MDL_ticket::is_incompatible_when_waiting" ref="a7973c258920330e3499a6e9c5112446d" args="(enum_mdl_type type) const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_incompatible_when_waiting</b> (enum_mdl_type type) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__ticket.html#af1bd23371e97d8bf6b0ff9de43e7e418">accept_visitor</a> (<a class="el" href="classMDL__wait__for__graph__visitor.html">MDL_wait_for_graph_visitor</a> *dvisitor)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__ticket.html#ac8281033b795378ef6b4672ba6ef4ba5">get_deadlock_weight</a> () const </td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__ticket.html#a74155707577dfd12cc7f47229e4f0d17">next_in_context</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88281cdb21f74551799ae0940b89aed1"></a><!-- doxytag: member="MDL_ticket::prev_in_context" ref="a88281cdb21f74551799ae0940b89aed1" args="" -->
<a class="el" href="classMDL__ticket.html">MDL_ticket</a> **&#160;</td><td class="memItemRight" valign="bottom"><b>prev_in_context</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__ticket.html#ad9c009e5c097d2159dd142aa7f58e010">next_in_lock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a873d87712e75f3e7f58399575571198d"></a><!-- doxytag: member="MDL_ticket::prev_in_lock" ref="a873d87712e75f3e7f58399575571198d" args="" -->
<a class="el" href="classMDL__ticket.html">MDL_ticket</a> **&#160;</td><td class="memItemRight" valign="bottom"><b>prev_in_lock</b></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aab25f1f33d2f55eb5c79f0f7b6bfaecd"></a><!-- doxytag: member="MDL_ticket::MDL_context" ref="aab25f1f33d2f55eb5c79f0f7b6bfaecd" args="" -->
class&#160;</td><td class="memItemRight" valign="bottom"><b>MDL_context</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A granted metadata lock.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd><a class="el" href="classMDL__ticket.html">MDL_ticket</a> members are private to the MDL subsystem.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Multiple shared locks on a same object are represented by a single ticket. The same does not apply for other lock types.</dd>
<dd>
There are two groups of <a class="el" href="classMDL__ticket.html">MDL_ticket</a> members:<ul>
<li>"Externally accessible". These members can be accessed from threads/contexts different than ticket owner in cases when ticket participates in some list of granted or waiting tickets for a lock. Therefore one should change these members before including then to waiting/granted lists or while holding lock protecting those lists.</li>
<li>"Context private". Such members are private to thread/context owning this ticket. I.e. they should not be accessed from other threads/contexts. </li>
</ul>
</dd></dl>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af1bd23371e97d8bf6b0ff9de43e7e418"></a><!-- doxytag: member="MDL_ticket::accept_visitor" ref="af1bd23371e97d8bf6b0ff9de43e7e418" args="(MDL_wait_for_graph_visitor *dvisitor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMDL__ticket.html#af1bd23371e97d8bf6b0ff9de43e7e418">MDL_ticket::accept_visitor</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__wait__for__graph__visitor.html">MDL_wait_for_graph_visitor</a> *&#160;</td>
          <td class="paramname"><em>gvisitor</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implement <a class="el" href="classMDL__wait__for__subgraph.html">MDL_wait_for_subgraph</a> interface.</p>
<p>Traverse a portion of wait-for graph which is reachable through the edge represented by this ticket and search for deadlocks.</p>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>A deadlock is found. A pointer to deadlock victim is saved in the visitor. </td></tr>
    <tr><td class="paramname">FALSE</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classMDL__wait__for__subgraph.html#ad14f796a25430ecabd24572efa22f3f5">MDL_wait_for_subgraph</a>.</p>

</div>
</div>
<a class="anchor" id="a4fd3f255fe828cbf0d95a5d02d70d302"></a><!-- doxytag: member="MDL_ticket::downgrade_lock" ref="a4fd3f255fe828cbf0d95a5d02d70d302" args="(enum_mdl_type type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classMDL__ticket.html#a4fd3f255fe828cbf0d95a5d02d70d302">MDL_ticket::downgrade_lock</a> </td>
          <td>(</td>
          <td class="paramtype">enum_mdl_type&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Downgrade an EXCLUSIVE or SHARED_NO_WRITE lock to shared metadata lock.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of lock to which exclusive lock should be downgraded. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac8281033b795378ef6b4672ba6ef4ba5"></a><!-- doxytag: member="MDL_ticket::get_deadlock_weight" ref="ac8281033b795378ef6b4672ba6ef4ba5" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint <a class="el" href="classMDL__ticket.html#ac8281033b795378ef6b4672ba6ef4ba5">MDL_ticket::get_deadlock_weight</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the 'weight' of this ticket for the victim selection algorithm. Requests with lower weight are preferred to requests with higher weight when choosing a victim. </p>

<p>Implements <a class="el" href="classMDL__wait__for__subgraph.html">MDL_wait_for_subgraph</a>.</p>

</div>
</div>
<a class="anchor" id="ae66be0a78d1a420517eb0147b713e60a"></a><!-- doxytag: member="MDL_ticket::has_pending_conflicting_lock" ref="ae66be0a78d1a420517eb0147b713e60a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMDL__ticket.html#ae66be0a78d1a420517eb0147b713e60a">MDL_ticket::has_pending_conflicting_lock</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check if we have any pending locks which conflict with existing shared lock.</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>The ticket must match an acquired lock.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if there is a conflicting lock request, FALSE otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="abe2b39dc87e308b25ae170cdcbe10fbd"></a><!-- doxytag: member="MDL_ticket::has_stronger_or_equal_type" ref="abe2b39dc87e308b25ae170cdcbe10fbd" args="(enum_mdl_type type) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classMDL__ticket.html#abe2b39dc87e308b25ae170cdcbe10fbd">MDL_ticket::has_stronger_or_equal_type</a> </td>
          <td>(</td>
          <td class="paramtype">enum_mdl_type&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check if ticket represents metadata lock of "stronger" or equal type than specified one. I.e. if metadata lock represented by ticket won't allow any of locks which are not allowed by specified type of lock.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if ticket has stronger or equal type FALSE otherwise. </dd></dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a74155707577dfd12cc7f47229e4f0d17"></a><!-- doxytag: member="MDL_ticket::next_in_context" ref="a74155707577dfd12cc7f47229e4f0d17" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__ticket.html">MDL_ticket</a>* <a class="el" href="classMDL__ticket.html#a74155707577dfd12cc7f47229e4f0d17">MDL_ticket::next_in_context</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointers for participating in the list of lock requests for this context. Context private. </p>

</div>
</div>
<a class="anchor" id="ad9c009e5c097d2159dd142aa7f58e010"></a><!-- doxytag: member="MDL_ticket::next_in_lock" ref="ad9c009e5c097d2159dd142aa7f58e010" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__ticket.html">MDL_ticket</a>* <a class="el" href="classMDL__ticket.html#ad9c009e5c097d2159dd142aa7f58e010">MDL_ticket::next_in_lock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pointers for participating in the list of satisfied/pending requests for the lock. Externally accessible. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="mdl_8h_source.html">mdl.h</a></li>
<li>mdl.cc</li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 16 2015 12:37:02 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
