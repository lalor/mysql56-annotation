<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: sql_error.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">sql_error.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Copyright (c) 2005, 2013, Oracle and/or its affiliates. All rights reserved.</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">   This program is free software; you can redistribute it and/or modify</span>
<a name="l00004"></a>00004 <span class="comment">   it under the terms of the GNU General Public License as published by</span>
<a name="l00005"></a>00005 <span class="comment">   the Free Software Foundation; version 2 of the License.</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">   This program is distributed in the hope that it will be useful,</span>
<a name="l00008"></a>00008 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00009"></a>00009 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00010"></a>00010 <span class="comment">   GNU General Public License for more details.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">   You should have received a copy of the GNU General Public License</span>
<a name="l00013"></a>00013 <span class="comment">   along with this program; if not, write to the Free Software</span>
<a name="l00014"></a>00014 <span class="comment">   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA */</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#ifndef SQL_ERROR_H</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor">#define SQL_ERROR_H</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;sql_list.h&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;m_string.h&quot;</span> <span class="comment">/* LEX_STRING */</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;sql_string.h&quot;</span>                        <span class="comment">/* String */</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;sql_plist.h&quot;</span> <span class="comment">/* I_P_List */</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;mysql_com.h&quot;</span> <span class="comment">/* MYSQL_ERRMSG_SIZE */</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="keyword">class </span>THD;
<a name="l00026"></a>00026 <span class="keyword">class </span><a class="code" href="classmy__decimal.html">my_decimal</a>;
<a name="l00027"></a>00027 
<a name="l00029"></a>00029 
<a name="l00035"></a><a class="code" href="classSql__condition.html">00035</a> <span class="keyword">class </span><a class="code" href="classSql__condition.html">Sql_condition</a> : <span class="keyword">public</span> <a class="code" href="classSql__alloc.html">Sql_alloc</a>
<a name="l00036"></a>00036 {
<a name="l00037"></a>00037 <span class="keyword">public</span>:
<a name="l00038"></a>00038   <span class="comment">/*</span>
<a name="l00039"></a>00039 <span class="comment">    Enumeration value describing the severity of the error.</span>
<a name="l00040"></a>00040 <span class="comment"></span>
<a name="l00041"></a>00041 <span class="comment">    Note that these enumeration values must correspond to the indices</span>
<a name="l00042"></a>00042 <span class="comment">    of the sql_print_message_handlers array.</span>
<a name="l00043"></a>00043 <span class="comment">  */</span>
<a name="l00044"></a>00044   <span class="keyword">enum</span> enum_warning_level
<a name="l00045"></a>00045   { WARN_LEVEL_NOTE, WARN_LEVEL_WARN, WARN_LEVEL_ERROR, WARN_LEVEL_END};
<a name="l00046"></a>00046 
<a name="l00051"></a>00051   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classSql__condition.html#a4e4b64fe4b395d7d88a31d3a21eec888">get_message_text</a>() <span class="keyword">const</span>;
<a name="l00052"></a>00052 
<a name="l00057"></a>00057   <span class="keywordtype">int</span> <a class="code" href="classSql__condition.html#a0806836710b9802c8e1d5e1a83fcb290">get_message_octet_length</a>() <span class="keyword">const</span>;
<a name="l00058"></a>00058 
<a name="l00063"></a><a class="code" href="classSql__condition.html#ae0be933be63dc61c3a1b583c5801bac8">00063</a>   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classSql__condition.html#ae0be933be63dc61c3a1b583c5801bac8">get_sqlstate</a>()<span class="keyword"> const</span>
<a name="l00064"></a>00064 <span class="keyword">  </span>{ <span class="keywordflow">return</span> m_returned_sqlstate; }
<a name="l00065"></a>00065 
<a name="l00070"></a><a class="code" href="classSql__condition.html#a63dbdd3c8fb6697d802eda9545118a13">00070</a>   uint <a class="code" href="classSql__condition.html#a63dbdd3c8fb6697d802eda9545118a13">get_sql_errno</a>()<span class="keyword"> const</span>
<a name="l00071"></a>00071 <span class="keyword">  </span>{ <span class="keywordflow">return</span> m_sql_errno; }
<a name="l00072"></a>00072 
<a name="l00077"></a><a class="code" href="classSql__condition.html#a7b8f02b36cc141917c5991c768d03b02">00077</a>   Sql_condition::enum_warning_level <a class="code" href="classSql__condition.html#a7b8f02b36cc141917c5991c768d03b02">get_level</a>()<span class="keyword"> const</span>
<a name="l00078"></a>00078 <span class="keyword">  </span>{ <span class="keywordflow">return</span> m_level; }
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="keyword">private</span>:
<a name="l00081"></a>00081   <span class="comment">/*</span>
<a name="l00082"></a>00082 <span class="comment">    The interface of Sql_condition is mostly private, by design,</span>
<a name="l00083"></a>00083 <span class="comment">    so that only the following code:</span>
<a name="l00084"></a>00084 <span class="comment">    - various raise_error() or raise_warning() methods in class THD,</span>
<a name="l00085"></a>00085 <span class="comment">    - the implementation of SIGNAL / RESIGNAL / GET DIAGNOSTICS</span>
<a name="l00086"></a>00086 <span class="comment">    - catch / re-throw of SQL conditions in stored procedures (sp_rcontext)</span>
<a name="l00087"></a>00087 <span class="comment">    is allowed to create / modify a SQL condition.</span>
<a name="l00088"></a>00088 <span class="comment">    Enforcing this policy prevents confusion, since the only public</span>
<a name="l00089"></a>00089 <span class="comment">    interface available to the rest of the server implementation</span>
<a name="l00090"></a>00090 <span class="comment">    is the interface offered by the THD methods (THD::raise_error()),</span>
<a name="l00091"></a>00091 <span class="comment">    which should be used.</span>
<a name="l00092"></a>00092 <span class="comment">  */</span>
<a name="l00093"></a>00093   <span class="keyword">friend</span> <span class="keyword">class </span>THD;
<a name="l00094"></a>00094   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classWarning__info.html">Warning_info</a>;
<a name="l00095"></a>00095   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classSql__cmd__common__signal.html">Sql_cmd_common_signal</a>;
<a name="l00096"></a>00096   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classSql__cmd__signal.html">Sql_cmd_signal</a>;
<a name="l00097"></a>00097   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classSql__cmd__resignal.html">Sql_cmd_resignal</a>;
<a name="l00098"></a>00098   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classsp__rcontext.html">sp_rcontext</a>;
<a name="l00099"></a>00099   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classCondition__information__item.html">Condition_information_item</a>;
<a name="l00100"></a>00100 
<a name="l00106"></a>00106   <a class="code" href="classSql__condition.html">Sql_condition</a>();
<a name="l00107"></a>00107 
<a name="l00113"></a>00113   <span class="keywordtype">void</span> init(MEM_ROOT *mem_root);
<a name="l00114"></a>00114 
<a name="l00120"></a>00120   <a class="code" href="classSql__condition.html">Sql_condition</a>(MEM_ROOT *mem_root);
<a name="l00121"></a>00121 
<a name="l00123"></a>00123   ~<a class="code" href="classSql__condition.html">Sql_condition</a>()
<a name="l00124"></a>00124   {}
<a name="l00125"></a>00125 
<a name="l00130"></a>00130   <span class="keywordtype">void</span> copy_opt_attributes(<span class="keyword">const</span> <a class="code" href="classSql__condition.html">Sql_condition</a> *cond);
<a name="l00131"></a>00131 
<a name="l00140"></a>00140   <span class="keywordtype">void</span> <span class="keyword">set</span>(uint sql_errno, <span class="keyword">const</span> <span class="keywordtype">char</span>* sqlstate,
<a name="l00141"></a>00141            Sql_condition::enum_warning_level level,
<a name="l00142"></a>00142            <span class="keyword">const</span> <span class="keywordtype">char</span>* msg);
<a name="l00143"></a>00143 
<a name="l00149"></a>00149   <span class="keywordtype">void</span> set_builtin_message_text(<span class="keyword">const</span> <span class="keywordtype">char</span>* str);
<a name="l00150"></a>00150 
<a name="l00152"></a>00152   <span class="keywordtype">void</span> set_sqlstate(<span class="keyword">const</span> <span class="keywordtype">char</span>* sqlstate);
<a name="l00153"></a>00153 
<a name="l00155"></a>00155   <span class="keywordtype">void</span> set_class_origins();
<a name="l00156"></a>00156 
<a name="l00160"></a>00160   <span class="keywordtype">void</span> clear();
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="keyword">private</span>:
<a name="l00164"></a>00164   <a class="code" href="classString.html">String</a> m_class_origin;
<a name="l00165"></a>00165 
<a name="l00167"></a>00167   <a class="code" href="classString.html">String</a> m_subclass_origin;
<a name="l00168"></a>00168 
<a name="l00170"></a>00170   <a class="code" href="classString.html">String</a> m_constraint_catalog;
<a name="l00171"></a>00171 
<a name="l00173"></a>00173   <a class="code" href="classString.html">String</a> m_constraint_schema;
<a name="l00174"></a>00174 
<a name="l00176"></a>00176   <a class="code" href="classString.html">String</a> m_constraint_name;
<a name="l00177"></a>00177 
<a name="l00179"></a>00179   <a class="code" href="classString.html">String</a> m_catalog_name;
<a name="l00180"></a>00180 
<a name="l00182"></a>00182   <a class="code" href="classString.html">String</a> m_schema_name;
<a name="l00183"></a>00183 
<a name="l00185"></a>00185   <a class="code" href="classString.html">String</a> m_table_name;
<a name="l00186"></a>00186 
<a name="l00188"></a>00188   <a class="code" href="classString.html">String</a> m_column_name;
<a name="l00189"></a>00189 
<a name="l00191"></a>00191   <a class="code" href="classString.html">String</a> m_cursor_name;
<a name="l00192"></a>00192 
<a name="l00194"></a>00194   <a class="code" href="classString.html">String</a> m_message_text;
<a name="l00195"></a>00195 
<a name="l00197"></a>00197   uint m_sql_errno;
<a name="l00198"></a>00198 
<a name="l00203"></a>00203   <span class="keywordtype">char</span> m_returned_sqlstate[SQLSTATE_LENGTH+1];
<a name="l00204"></a>00204 
<a name="l00206"></a>00206   Sql_condition::enum_warning_level m_level;
<a name="l00207"></a>00207 
<a name="l00209"></a>00209   <a class="code" href="classSql__condition.html">Sql_condition</a> *next_in_wi;
<a name="l00210"></a>00210   <a class="code" href="classSql__condition.html">Sql_condition</a> **prev_in_wi;
<a name="l00211"></a>00211 
<a name="l00213"></a>00213   MEM_ROOT *m_mem_root;
<a name="l00214"></a>00214 };
<a name="l00215"></a>00215 
<a name="l00217"></a>00217 
<a name="l00221"></a><a class="code" href="classWarning__info.html">00221</a> <span class="keyword">class </span><a class="code" href="classWarning__info.html">Warning_info</a>
<a name="l00222"></a>00222 {
<a name="l00224"></a>00224   <span class="keyword">typedef</span> <a class="code" href="classI__P__List.html">I_P_List</a>&lt;<a class="code" href="classSql__condition.html">Sql_condition</a>,
<a name="l00225"></a>00225                    <a class="code" href="structI__P__List__adapter.html">I_P_List_adapter</a>&lt;<a class="code" href="classSql__condition.html">Sql_condition</a>,
<a name="l00226"></a>00226                                     &amp;Sql_condition::next_in_wi,
<a name="l00227"></a>00227                                     &amp;Sql_condition::prev_in_wi&gt;,
<a name="l00228"></a>00228                    <a class="code" href="classI__P__List__counter.html">I_P_List_counter</a>,
<a name="l00229"></a>00229                    <a class="code" href="classI__P__List__fast__push__back.html">I_P_List_fast_push_back&lt;Sql_condition&gt;</a> &gt;
<a name="l00230"></a>00230           <a class="code" href="classI__P__List.html">Sql_condition_list</a>;
<a name="l00231"></a>00231 
<a name="l00233"></a>00233   MEM_ROOT           m_warn_root;
<a name="l00234"></a>00234 
<a name="l00236"></a>00236   <a class="code" href="classI__P__List.html">Sql_condition_list</a>   m_warn_list;
<a name="l00237"></a>00237 
<a name="l00239"></a>00239   uint               m_warn_count[(uint) Sql_condition::WARN_LEVEL_END];
<a name="l00240"></a>00240 
<a name="l00247"></a>00247   uint               m_current_statement_warn_count;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249   <span class="comment">/*</span>
<a name="l00250"></a>00250 <span class="comment">    Row counter, to print in errors and warnings. Not increased in</span>
<a name="l00251"></a>00251 <span class="comment">    create_sort_index(); may differ from examined_row_count.</span>
<a name="l00252"></a>00252 <span class="comment">  */</span>
<a name="l00253"></a>00253   ulong              m_current_row_for_warning;
<a name="l00254"></a>00254 
<a name="l00256"></a>00256   ulonglong          m_warn_id;
<a name="l00257"></a>00257 
<a name="l00272"></a>00272   <span class="keyword">const</span> <a class="code" href="classSql__condition.html">Sql_condition</a> *m_error_condition;
<a name="l00273"></a>00273 
<a name="l00275"></a>00275   <span class="keywordtype">bool</span>               m_allow_unlimited_warnings;
<a name="l00276"></a>00276 
<a name="l00278"></a>00278   <span class="keywordtype">bool</span> m_read_only;
<a name="l00279"></a>00279 
<a name="l00281"></a>00281   <a class="code" href="classWarning__info.html">Warning_info</a> *m_next_in_da;
<a name="l00282"></a>00282   <a class="code" href="classWarning__info.html">Warning_info</a> **m_prev_in_da;
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <a class="code" href="classList.html">List&lt;Sql_condition&gt;</a> m_marked_sql_conditions;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 <span class="keyword">public</span>:
<a name="l00287"></a>00287   <a class="code" href="classWarning__info.html">Warning_info</a>(ulonglong warn_id_arg, <span class="keywordtype">bool</span> allow_unlimited_warnings);
<a name="l00288"></a>00288   ~<a class="code" href="classWarning__info.html">Warning_info</a>();
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 <span class="keyword">private</span>:
<a name="l00291"></a>00291   <a class="code" href="classWarning__info.html">Warning_info</a>(<span class="keyword">const</span> <a class="code" href="classWarning__info.html">Warning_info</a> &amp;rhs); <span class="comment">/* Not implemented */</span>
<a name="l00292"></a>00292   <a class="code" href="classWarning__info.html">Warning_info</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classWarning__info.html">Warning_info</a> &amp;rhs); <span class="comment">/* Not implemented */</span>
<a name="l00293"></a>00293 
<a name="l00303"></a>00303   <span class="keywordtype">bool</span> has_sql_condition(<span class="keyword">const</span> <span class="keywordtype">char</span> *message_str, ulong message_length) <span class="keyword">const</span>;
<a name="l00304"></a>00304 
<a name="l00312"></a>00312   <span class="keywordtype">void</span> clear(ulonglong new_id);
<a name="l00313"></a>00313 
<a name="l00326"></a>00326   <span class="keywordtype">void</span> opt_clear(ulonglong query_id)
<a name="l00327"></a>00327   {
<a name="l00328"></a>00328     <span class="keywordflow">if</span> (query_id != m_warn_id)
<a name="l00329"></a>00329       clear(query_id);
<a name="l00330"></a>00330   }
<a name="l00331"></a>00331 
<a name="l00341"></a>00341   <span class="keywordtype">void</span> append_warning_info(THD *thd, <span class="keyword">const</span> <a class="code" href="classWarning__info.html">Warning_info</a> *source);
<a name="l00342"></a>00342 
<a name="l00348"></a>00348   <span class="keywordtype">void</span> reset_for_next_command()
<a name="l00349"></a>00349   { m_current_statement_warn_count= 0; }
<a name="l00350"></a>00350 
<a name="l00355"></a>00355   <span class="keywordtype">void</span> mark_sql_conditions_for_removal();
<a name="l00356"></a>00356 
<a name="l00361"></a>00361   <span class="keywordtype">void</span> unmark_sql_conditions_from_removal()
<a name="l00362"></a>00362   { m_marked_sql_conditions.empty(); }
<a name="l00363"></a>00363 
<a name="l00368"></a>00368   <span class="keywordtype">void</span> remove_marked_sql_conditions();
<a name="l00369"></a>00369 
<a name="l00380"></a>00380   <span class="keywordtype">bool</span> is_marked_for_removal(<span class="keyword">const</span> <a class="code" href="classSql__condition.html">Sql_condition</a> *cond) <span class="keyword">const</span>;
<a name="l00381"></a>00381 
<a name="l00386"></a>00386   <span class="keywordtype">void</span> mark_condition_for_removal(<a class="code" href="classSql__condition.html">Sql_condition</a> *cond)
<a name="l00387"></a>00387   { m_marked_sql_conditions.push_back(cond, &amp;m_warn_root); }
<a name="l00388"></a>00388 
<a name="l00393"></a>00393   ulong warn_count()<span class="keyword"> const</span>
<a name="l00394"></a>00394 <span class="keyword">  </span>{
<a name="l00395"></a>00395     <span class="comment">/*</span>
<a name="l00396"></a>00396 <span class="comment">      This may be higher than warn_list.elements() if we have</span>
<a name="l00397"></a>00397 <span class="comment">      had more warnings than thd-&gt;variables.max_error_count.</span>
<a name="l00398"></a>00398 <span class="comment">    */</span>
<a name="l00399"></a>00399     <span class="keywordflow">return</span> (m_warn_count[(uint) Sql_condition::WARN_LEVEL_NOTE] +
<a name="l00400"></a>00400             m_warn_count[(uint) Sql_condition::WARN_LEVEL_ERROR] +
<a name="l00401"></a>00401             m_warn_count[(uint) Sql_condition::WARN_LEVEL_WARN]);
<a name="l00402"></a>00402   }
<a name="l00403"></a>00403 
<a name="l00408"></a>00408   ulong error_count()<span class="keyword"> const</span>
<a name="l00409"></a>00409 <span class="keyword">  </span>{ <span class="keywordflow">return</span> m_warn_count[(uint) Sql_condition::WARN_LEVEL_ERROR]; }
<a name="l00410"></a>00410 
<a name="l00414"></a>00414   uint cond_count()<span class="keyword"> const</span>
<a name="l00415"></a>00415 <span class="keyword">  </span>{
<a name="l00416"></a>00416     <span class="keywordflow">return</span> m_warn_list.elements();
<a name="l00417"></a>00417   }
<a name="l00418"></a>00418 
<a name="l00420"></a>00420   ulonglong id()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_warn_id; }
<a name="l00421"></a>00421 
<a name="l00423"></a>00423   <span class="keywordtype">void</span> id(ulonglong <span class="keywordtype">id</span>) { m_warn_id= id; }
<a name="l00424"></a>00424 
<a name="l00426"></a>00426   <span class="keywordtype">bool</span> is_empty()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_warn_list.is_empty(); }
<a name="l00427"></a>00427 
<a name="l00429"></a>00429   <span class="keywordtype">void</span> inc_current_row_for_warning() { m_current_row_for_warning++; }
<a name="l00430"></a>00430 
<a name="l00432"></a>00432   <span class="keywordtype">void</span> reset_current_row_for_warning() { m_current_row_for_warning= 1; }
<a name="l00433"></a>00433 
<a name="l00435"></a>00435   ulong current_row_for_warning()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_current_row_for_warning; }
<a name="l00436"></a>00436 
<a name="l00438"></a>00438   ulong current_statement_warn_count()<span class="keyword"> const</span>
<a name="l00439"></a>00439 <span class="keyword">  </span>{ <span class="keywordflow">return</span> m_current_statement_warn_count; }
<a name="l00440"></a>00440 
<a name="l00442"></a>00442   <span class="keywordtype">void</span> reserve_space(THD *thd, uint count);
<a name="l00443"></a>00443 
<a name="l00456"></a>00456   <a class="code" href="classSql__condition.html">Sql_condition</a> *push_warning(THD *thd,
<a name="l00457"></a>00457                               uint sql_errno,
<a name="l00458"></a>00458                               <span class="keyword">const</span> <span class="keywordtype">char</span>* sqlstate,
<a name="l00459"></a>00459                               Sql_condition::enum_warning_level level,
<a name="l00460"></a>00460                               <span class="keyword">const</span> <span class="keywordtype">char</span>* msg);
<a name="l00461"></a>00461 
<a name="l00471"></a>00471   <a class="code" href="classSql__condition.html">Sql_condition</a> *push_warning(THD *thd, <span class="keyword">const</span> <a class="code" href="classSql__condition.html">Sql_condition</a> *sql_condition);
<a name="l00472"></a>00472 
<a name="l00484"></a>00484   <span class="keywordtype">void</span> set_read_only(<span class="keywordtype">bool</span> read_only)
<a name="l00485"></a>00485   { m_read_only= read_only; }
<a name="l00486"></a>00486 
<a name="l00491"></a>00491   <span class="keywordtype">bool</span> is_read_only()<span class="keyword"> const</span>
<a name="l00492"></a>00492 <span class="keyword">  </span>{ <span class="keywordflow">return</span> m_read_only; }
<a name="l00493"></a>00493 
<a name="l00500"></a>00500   <span class="keyword">const</span> <a class="code" href="classSql__condition.html">Sql_condition</a> *get_error_condition()<span class="keyword"> const</span>
<a name="l00501"></a>00501 <span class="keyword">  </span>{ <span class="keywordflow">return</span> m_error_condition; }
<a name="l00502"></a>00502 
<a name="l00508"></a>00508   <span class="keywordtype">void</span> set_error_condition(<span class="keyword">const</span> <a class="code" href="classSql__condition.html">Sql_condition</a> *error_condition)
<a name="l00509"></a>00509   { m_error_condition= error_condition; }
<a name="l00510"></a>00510 
<a name="l00517"></a>00517   <span class="keywordtype">void</span> clear_error_condition()
<a name="l00518"></a>00518   { m_error_condition= NULL; }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520   <span class="comment">// for:</span>
<a name="l00521"></a>00521   <span class="comment">//   - m_next_in_da / m_prev_in_da</span>
<a name="l00522"></a>00522   <span class="comment">//   - is_marked_for_removal()</span>
<a name="l00523"></a>00523   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classDiagnostics__area.html">Diagnostics_area</a>;
<a name="l00524"></a>00524 };
<a name="l00525"></a>00525 
<a name="l00526"></a>00526 uint err_conv(<span class="keywordtype">char</span> *buff, <span class="keywordtype">size_t</span> to_length, <span class="keyword">const</span> <span class="keywordtype">char</span> *from,
<a name="l00527"></a>00527               <span class="keywordtype">size_t</span> from_length, <span class="keyword">const</span> CHARSET_INFO *from_cs);
<a name="l00528"></a>00528 
<a name="l00529"></a><a class="code" href="classErrConvString.html">00529</a> <span class="keyword">class </span><a class="code" href="classErrConvString.html">ErrConvString</a>
<a name="l00530"></a>00530 {
<a name="l00531"></a>00531   <span class="keywordtype">char</span> err_buffer[MYSQL_ERRMSG_SIZE];
<a name="l00532"></a>00532   <span class="keywordtype">size_t</span> buf_length;
<a name="l00533"></a>00533 <span class="keyword">public</span>:
<a name="l00534"></a>00534   <a class="code" href="classErrConvString.html">ErrConvString</a>(<a class="code" href="classString.html">String</a> *str)
<a name="l00535"></a>00535   {
<a name="l00536"></a>00536     buf_length= err_conv(err_buffer, <span class="keyword">sizeof</span>(err_buffer), str-&gt;ptr(),
<a name="l00537"></a>00537                          str-&gt;length(), str-&gt;charset());
<a name="l00538"></a>00538   }
<a name="l00539"></a>00539 
<a name="l00540"></a>00540   <a class="code" href="classErrConvString.html">ErrConvString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keyword">const</span> CHARSET_INFO* cs)
<a name="l00541"></a>00541   {
<a name="l00542"></a>00542     buf_length= err_conv(err_buffer, <span class="keyword">sizeof</span>(err_buffer), str, strlen(str), cs);
<a name="l00543"></a>00543   }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545   <a class="code" href="classErrConvString.html">ErrConvString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, uint length)
<a name="l00546"></a>00546   {
<a name="l00547"></a>00547     buf_length= err_conv(err_buffer, <span class="keyword">sizeof</span>(err_buffer), str, length,
<a name="l00548"></a>00548                          &amp;my_charset_latin1);
<a name="l00549"></a>00549   }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551   <a class="code" href="classErrConvString.html">ErrConvString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, uint length, <span class="keyword">const</span> CHARSET_INFO* cs)
<a name="l00552"></a>00552   {
<a name="l00553"></a>00553     buf_length= err_conv(err_buffer, <span class="keyword">sizeof</span>(err_buffer), str, length, cs);
<a name="l00554"></a>00554   }
<a name="l00555"></a>00555 
<a name="l00556"></a>00556   <a class="code" href="classErrConvString.html">ErrConvString</a>(longlong nr)
<a name="l00557"></a>00557   {
<a name="l00558"></a>00558     buf_length= my_snprintf(err_buffer, <span class="keyword">sizeof</span>(err_buffer), <span class="stringliteral">&quot;%lld&quot;</span>, nr);
<a name="l00559"></a>00559   }
<a name="l00560"></a>00560 
<a name="l00561"></a>00561   <a class="code" href="classErrConvString.html">ErrConvString</a>(longlong nr, <span class="keywordtype">bool</span> unsigned_flag)
<a name="l00562"></a>00562   {
<a name="l00563"></a>00563     buf_length= longlong10_to_str(nr, err_buffer, unsigned_flag ? 10 : -10) -
<a name="l00564"></a>00564                 err_buffer;
<a name="l00565"></a>00565   }
<a name="l00566"></a>00566 
<a name="l00567"></a>00567   <a class="code" href="classErrConvString.html">ErrConvString</a>(<span class="keywordtype">double</span> nr);
<a name="l00568"></a>00568   <a class="code" href="classErrConvString.html">ErrConvString</a>(<span class="keyword">const</span> <a class="code" href="classmy__decimal.html">my_decimal</a> *nr);
<a name="l00569"></a>00569   <a class="code" href="classErrConvString.html">ErrConvString</a>(<span class="keyword">const</span> <span class="keyword">struct</span> st_mysql_time *ltime, uint dec);
<a name="l00570"></a>00570  
<a name="l00571"></a>00571   ~<a class="code" href="classErrConvString.html">ErrConvString</a>() { };
<a name="l00572"></a>00572   <span class="keywordtype">char</span> *ptr() { <span class="keywordflow">return</span> err_buffer; }
<a name="l00573"></a>00573   <span class="keywordtype">size_t</span> length()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> buf_length; }
<a name="l00574"></a>00574 };
<a name="l00575"></a>00575 
<a name="l00577"></a>00577 
<a name="l00584"></a><a class="code" href="classDiagnostics__area.html">00584</a> <span class="keyword">class </span><a class="code" href="classDiagnostics__area.html">Diagnostics_area</a>
<a name="l00585"></a>00585 {
<a name="l00586"></a>00586 <span class="keyword">private</span>:
<a name="l00588"></a>00588   <span class="keyword">typedef</span> <a class="code" href="classI__P__List.html">I_P_List</a>&lt;<a class="code" href="classWarning__info.html">Warning_info</a>,
<a name="l00589"></a>00589                    <a class="code" href="structI__P__List__adapter.html">I_P_List_adapter</a>&lt;<a class="code" href="classWarning__info.html">Warning_info</a>,
<a name="l00590"></a>00590                                     &amp;Warning_info::m_next_in_da,
<a name="l00591"></a>00591                                     &amp;Warning_info::m_prev_in_da&gt;,
<a name="l00592"></a>00592                    <a class="code" href="classI__P__List__counter.html">I_P_List_counter</a>,
<a name="l00593"></a>00593                    <a class="code" href="classI__P__List__fast__push__back.html">I_P_List_fast_push_back&lt;Warning_info&gt;</a> &gt;
<a name="l00594"></a>00594           <a class="code" href="classI__P__List.html">Warning_info_list</a>;
<a name="l00595"></a>00595 
<a name="l00596"></a>00596 <span class="keyword">public</span>:
<a name="l00598"></a>00598   <span class="keyword">typedef</span> <a class="code" href="classI__P__List__iterator.html">Warning_info::Sql_condition_list::Const_Iterator</a>
<a name="l00599"></a><a class="code" href="classDiagnostics__area.html#a96c6ca7e00a0a4f3079ad2b7edfa1978">00599</a>     <a class="code" href="classDiagnostics__area.html#a96c6ca7e00a0a4f3079ad2b7edfa1978">Sql_condition_iterator</a>;
<a name="l00600"></a>00600 
<a name="l00601"></a><a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131">00601</a>   <span class="keyword">enum</span> <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131">enum_diagnostics_status</a>
<a name="l00602"></a>00602   {
<a name="l00604"></a><a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a51ec0feac180616bb01f59dca5868b22">00604</a>     <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a51ec0feac180616bb01f59dca5868b22">DA_EMPTY</a>= 0,
<a name="l00606"></a><a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a3eacb4863806fb111ed5c7850d994812">00606</a>     <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a3eacb4863806fb111ed5c7850d994812">DA_OK</a>,
<a name="l00608"></a><a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131af68a233e4d673c41e756627618653633">00608</a>     <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131af68a233e4d673c41e756627618653633">DA_EOF</a>,
<a name="l00610"></a><a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a74fcc13ebdfed9fdcd0662b70f515c79">00610</a>     <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a74fcc13ebdfed9fdcd0662b70f515c79">DA_ERROR</a>,
<a name="l00612"></a><a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131aefb51825f2df51a6bf2532f75b0c1ebe">00612</a>     <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131aefb51825f2df51a6bf2532f75b0c1ebe">DA_DISABLED</a>
<a name="l00613"></a>00613   };
<a name="l00614"></a>00614 
<a name="l00615"></a>00615   <span class="keywordtype">void</span> set_overwrite_status(<span class="keywordtype">bool</span> can_overwrite_status)
<a name="l00616"></a>00616   { m_can_overwrite_status= can_overwrite_status; }
<a name="l00617"></a>00617 
<a name="l00618"></a>00618   <span class="keywordtype">bool</span> is_sent()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_is_sent; }
<a name="l00619"></a>00619 
<a name="l00620"></a>00620   <span class="keywordtype">void</span> set_is_sent(<span class="keywordtype">bool</span> is_sent) { m_is_sent= is_sent; }
<a name="l00621"></a>00621 
<a name="l00622"></a>00622   <span class="keywordtype">void</span> <a class="code" href="classDiagnostics__area.html#a5b189a3cc7cd43505eaa6254e57a2f16">set_ok_status</a>(ulonglong affected_rows,
<a name="l00623"></a>00623                      ulonglong last_insert_id,
<a name="l00624"></a>00624                      <span class="keyword">const</span> <span class="keywordtype">char</span> *message);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626   <span class="keywordtype">void</span> <a class="code" href="classDiagnostics__area.html#a3b85cb8d8c79391a1612b1f03a92d7d6">set_eof_status</a>(THD *thd);
<a name="l00627"></a>00627 
<a name="l00628"></a>00628   <span class="keywordtype">void</span> <a class="code" href="classDiagnostics__area.html#a95257346f0ecb1dceb29b4b171936b19">set_error_status</a>(uint sql_errno);
<a name="l00629"></a>00629 
<a name="l00630"></a>00630   <span class="keywordtype">void</span> <a class="code" href="classDiagnostics__area.html#a95257346f0ecb1dceb29b4b171936b19">set_error_status</a>(uint sql_errno,
<a name="l00631"></a>00631                         <span class="keyword">const</span> <span class="keywordtype">char</span> *message,
<a name="l00632"></a>00632                         <span class="keyword">const</span> <span class="keywordtype">char</span> *sqlstate,
<a name="l00633"></a>00633                         <span class="keyword">const</span> <a class="code" href="classSql__condition.html">Sql_condition</a> *error_condition);
<a name="l00634"></a>00634 
<a name="l00635"></a>00635   <span class="keywordtype">void</span> <a class="code" href="classDiagnostics__area.html#a3ca17737803af475b84ff53f1409adf2">disable_status</a>();
<a name="l00636"></a>00636 
<a name="l00637"></a>00637   <span class="keywordtype">void</span> <a class="code" href="classDiagnostics__area.html#a81ad7fce5478744c6e2a5435330996d2">reset_diagnostics_area</a>();
<a name="l00638"></a>00638 
<a name="l00639"></a>00639   <span class="keywordtype">bool</span> is_set()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_status != <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a51ec0feac180616bb01f59dca5868b22">DA_EMPTY</a>; }
<a name="l00640"></a>00640 
<a name="l00641"></a>00641   <span class="keywordtype">bool</span> is_error()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a74fcc13ebdfed9fdcd0662b70f515c79">DA_ERROR</a>; }
<a name="l00642"></a>00642 
<a name="l00643"></a>00643   <span class="keywordtype">bool</span> is_eof()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131af68a233e4d673c41e756627618653633">DA_EOF</a>; }
<a name="l00644"></a>00644 
<a name="l00645"></a>00645   <span class="keywordtype">bool</span> is_ok()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a3eacb4863806fb111ed5c7850d994812">DA_OK</a>; }
<a name="l00646"></a>00646 
<a name="l00647"></a>00647   <span class="keywordtype">bool</span> is_disabled()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131aefb51825f2df51a6bf2532f75b0c1ebe">DA_DISABLED</a>; }
<a name="l00648"></a>00648 
<a name="l00649"></a>00649   <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131">enum_diagnostics_status</a> status()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_status; }
<a name="l00650"></a>00650 
<a name="l00651"></a>00651   <span class="keyword">const</span> <span class="keywordtype">char</span> *message()<span class="keyword"> const</span>
<a name="l00652"></a>00652 <span class="keyword">  </span>{ DBUG_ASSERT(m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a74fcc13ebdfed9fdcd0662b70f515c79">DA_ERROR</a> || m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a3eacb4863806fb111ed5c7850d994812">DA_OK</a>); <span class="keywordflow">return</span> m_message; }
<a name="l00653"></a>00653 
<a name="l00654"></a>00654   uint sql_errno()<span class="keyword"> const</span>
<a name="l00655"></a>00655 <span class="keyword">  </span>{ DBUG_ASSERT(m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a74fcc13ebdfed9fdcd0662b70f515c79">DA_ERROR</a>); <span class="keywordflow">return</span> m_sql_errno; }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657   <span class="keyword">const</span> <span class="keywordtype">char</span>* get_sqlstate()<span class="keyword"> const</span>
<a name="l00658"></a>00658 <span class="keyword">  </span>{ DBUG_ASSERT(m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a74fcc13ebdfed9fdcd0662b70f515c79">DA_ERROR</a>); <span class="keywordflow">return</span> m_sqlstate; }
<a name="l00659"></a>00659 
<a name="l00660"></a>00660   ulonglong affected_rows()<span class="keyword"> const</span>
<a name="l00661"></a>00661 <span class="keyword">  </span>{ DBUG_ASSERT(m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a3eacb4863806fb111ed5c7850d994812">DA_OK</a>); <span class="keywordflow">return</span> m_affected_rows; }
<a name="l00662"></a>00662 
<a name="l00663"></a>00663   ulonglong last_insert_id()<span class="keyword"> const</span>
<a name="l00664"></a>00664 <span class="keyword">  </span>{ DBUG_ASSERT(m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a3eacb4863806fb111ed5c7850d994812">DA_OK</a>); <span class="keywordflow">return</span> m_last_insert_id; }
<a name="l00665"></a>00665 
<a name="l00666"></a>00666   uint statement_warn_count()<span class="keyword"> const</span>
<a name="l00667"></a>00667 <span class="keyword">  </span>{
<a name="l00668"></a>00668     DBUG_ASSERT(m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131a3eacb4863806fb111ed5c7850d994812">DA_OK</a> || m_status == <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131af68a233e4d673c41e756627618653633">DA_EOF</a>);
<a name="l00669"></a>00669     <span class="keywordflow">return</span> m_statement_warn_count;
<a name="l00670"></a>00670   }
<a name="l00671"></a>00671 
<a name="l00672"></a>00672   <a class="code" href="classDiagnostics__area.html">Diagnostics_area</a>();
<a name="l00673"></a>00673   <a class="code" href="classDiagnostics__area.html">Diagnostics_area</a>(ulonglong warning_info_id, <span class="keywordtype">bool</span> allow_unlimited_warnings);
<a name="l00674"></a>00674 
<a name="l00675"></a>00675   <span class="keywordtype">void</span> push_warning_info(<a class="code" href="classWarning__info.html">Warning_info</a> *wi)
<a name="l00676"></a>00676   { m_wi_stack.push_front(wi); }
<a name="l00677"></a>00677 
<a name="l00678"></a>00678   <span class="keywordtype">void</span> pop_warning_info()
<a name="l00679"></a>00679   {
<a name="l00680"></a>00680     DBUG_ASSERT(m_wi_stack.elements() &gt; 0);
<a name="l00681"></a>00681     m_wi_stack.remove(m_wi_stack.front());
<a name="l00682"></a>00682   }
<a name="l00683"></a>00683 
<a name="l00684"></a>00684   <span class="keywordtype">void</span> set_warning_info_id(ulonglong <span class="keywordtype">id</span>)
<a name="l00685"></a>00685   { get_warning_info()-&gt;id(<span class="keywordtype">id</span>); }
<a name="l00686"></a>00686 
<a name="l00687"></a>00687   ulonglong warning_info_id()<span class="keyword"> const</span>
<a name="l00688"></a>00688 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;id(); }
<a name="l00689"></a>00689 
<a name="l00700"></a><a class="code" href="classDiagnostics__area.html#ae9898afba145585edd0efbd7dce6ac47">00700</a>   <span class="keywordtype">bool</span> <a class="code" href="classDiagnostics__area.html#ae9898afba145585edd0efbd7dce6ac47">warning_info_changed</a>(<span class="keyword">const</span> <a class="code" href="classWarning__info.html">Warning_info</a> *wi)<span class="keyword"> const</span>
<a name="l00701"></a>00701 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;id() != wi-&gt;id(); }
<a name="l00702"></a>00702 
<a name="l00703"></a>00703   <span class="keywordtype">bool</span> is_warning_info_empty()<span class="keyword"> const</span>
<a name="l00704"></a>00704 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;is_empty(); }
<a name="l00705"></a>00705 
<a name="l00706"></a>00706   ulong current_statement_warn_count()<span class="keyword"> const</span>
<a name="l00707"></a>00707 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;current_statement_warn_count(); }
<a name="l00708"></a>00708 
<a name="l00709"></a>00709   <span class="keywordtype">bool</span> has_sql_condition(<span class="keyword">const</span> <span class="keywordtype">char</span> *message_str, ulong message_length)<span class="keyword"> const</span>
<a name="l00710"></a>00710 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;has_sql_condition(message_str, message_length); }
<a name="l00711"></a>00711 
<a name="l00712"></a>00712   <span class="keywordtype">void</span> reset_for_next_command()
<a name="l00713"></a>00713   { get_warning_info()-&gt;reset_for_next_command(); }
<a name="l00714"></a>00714 
<a name="l00715"></a>00715   <span class="keywordtype">void</span> clear_warning_info(ulonglong <span class="keywordtype">id</span>)
<a name="l00716"></a>00716   { get_warning_info()-&gt;clear(<span class="keywordtype">id</span>); }
<a name="l00717"></a>00717 
<a name="l00718"></a>00718   <span class="keywordtype">void</span> opt_clear_warning_info(ulonglong query_id)
<a name="l00719"></a>00719   { get_warning_info()-&gt;opt_clear(query_id); }
<a name="l00720"></a>00720 
<a name="l00721"></a>00721   ulong current_row_for_warning()<span class="keyword"> const</span>
<a name="l00722"></a>00722 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;current_row_for_warning(); }
<a name="l00723"></a>00723 
<a name="l00724"></a>00724   <span class="keywordtype">void</span> inc_current_row_for_warning()
<a name="l00725"></a>00725   { get_warning_info()-&gt;inc_current_row_for_warning(); }
<a name="l00726"></a>00726 
<a name="l00727"></a>00727   <span class="keywordtype">void</span> reset_current_row_for_warning()
<a name="l00728"></a>00728   { get_warning_info()-&gt;reset_current_row_for_warning(); }
<a name="l00729"></a>00729 
<a name="l00730"></a>00730   <span class="keywordtype">bool</span> is_warning_info_read_only()<span class="keyword"> const</span>
<a name="l00731"></a>00731 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;is_read_only(); }
<a name="l00732"></a>00732 
<a name="l00733"></a>00733   <span class="keywordtype">void</span> set_warning_info_read_only(<span class="keywordtype">bool</span> read_only)
<a name="l00734"></a>00734   { get_warning_info()-&gt;set_read_only(read_only); }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736   ulong error_count()<span class="keyword"> const</span>
<a name="l00737"></a>00737 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;error_count(); }
<a name="l00738"></a>00738 
<a name="l00739"></a>00739   ulong warn_count()<span class="keyword"> const</span>
<a name="l00740"></a>00740 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;warn_count(); }
<a name="l00741"></a>00741 
<a name="l00742"></a>00742   uint cond_count()<span class="keyword"> const</span>
<a name="l00743"></a>00743 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;cond_count(); }
<a name="l00744"></a>00744 
<a name="l00745"></a>00745   <a class="code" href="classDiagnostics__area.html#a96c6ca7e00a0a4f3079ad2b7edfa1978">Sql_condition_iterator</a> sql_conditions()<span class="keyword"> const</span>
<a name="l00746"></a>00746 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;m_warn_list; }
<a name="l00747"></a>00747 
<a name="l00748"></a>00748   <span class="keywordtype">void</span> reserve_space(THD *thd, uint count)
<a name="l00749"></a>00749   { get_warning_info()-&gt;reserve_space(thd, count); }
<a name="l00750"></a>00750 
<a name="l00751"></a>00751   <a class="code" href="classSql__condition.html">Sql_condition</a> *push_warning(THD *thd, <span class="keyword">const</span> <a class="code" href="classSql__condition.html">Sql_condition</a> *sql_condition)
<a name="l00752"></a>00752   { <span class="keywordflow">return</span> get_warning_info()-&gt;push_warning(thd, sql_condition); }
<a name="l00753"></a>00753 
<a name="l00754"></a>00754   <a class="code" href="classSql__condition.html">Sql_condition</a> *push_warning(THD *thd,
<a name="l00755"></a>00755                               uint sql_errno,
<a name="l00756"></a>00756                               <span class="keyword">const</span> <span class="keywordtype">char</span>* sqlstate,
<a name="l00757"></a>00757                               Sql_condition::enum_warning_level level,
<a name="l00758"></a>00758                               <span class="keyword">const</span> <span class="keywordtype">char</span>* msg)
<a name="l00759"></a>00759   {
<a name="l00760"></a>00760     <span class="keywordflow">return</span> get_warning_info()-&gt;push_warning(thd,
<a name="l00761"></a>00761                                             sql_errno, sqlstate, level, msg);
<a name="l00762"></a>00762   }
<a name="l00763"></a>00763 
<a name="l00764"></a>00764   <span class="keywordtype">void</span> mark_sql_conditions_for_removal()
<a name="l00765"></a>00765   { get_warning_info()-&gt;mark_sql_conditions_for_removal(); }
<a name="l00766"></a>00766 
<a name="l00767"></a>00767   <span class="keywordtype">void</span> unmark_sql_conditions_from_removal()
<a name="l00768"></a>00768   { get_warning_info()-&gt;unmark_sql_conditions_from_removal(); }
<a name="l00769"></a>00769 
<a name="l00770"></a>00770   <span class="keywordtype">void</span> remove_marked_sql_conditions()
<a name="l00771"></a>00771   { get_warning_info()-&gt;remove_marked_sql_conditions(); }
<a name="l00772"></a>00772 
<a name="l00773"></a>00773   <span class="keyword">const</span> <a class="code" href="classSql__condition.html">Sql_condition</a> *get_error_condition()<span class="keyword"> const</span>
<a name="l00774"></a>00774 <span class="keyword">  </span>{ <span class="keywordflow">return</span> get_warning_info()-&gt;get_error_condition(); }
<a name="l00775"></a>00775 
<a name="l00776"></a>00776   <span class="keywordtype">void</span> copy_sql_conditions_to_wi(THD *thd, <a class="code" href="classWarning__info.html">Warning_info</a> *dst_wi)<span class="keyword"> const</span>
<a name="l00777"></a>00777 <span class="keyword">  </span>{ dst_wi-&gt;append_warning_info(thd, get_warning_info()); }
<a name="l00778"></a>00778 
<a name="l00779"></a>00779   <span class="keywordtype">void</span> copy_sql_conditions_from_wi(THD *thd, <span class="keyword">const</span> <a class="code" href="classWarning__info.html">Warning_info</a> *src_wi)
<a name="l00780"></a>00780   { get_warning_info()-&gt;append_warning_info(thd, src_wi); }
<a name="l00781"></a>00781 
<a name="l00782"></a>00782   <span class="keywordtype">void</span> <a class="code" href="classDiagnostics__area.html#ad7d8a74cb47c584653937c1aa81a141c">copy_non_errors_from_wi</a>(THD *thd, <span class="keyword">const</span> <a class="code" href="classWarning__info.html">Warning_info</a> *src_wi);
<a name="l00783"></a>00783 
<a name="l00784"></a>00784 <span class="keyword">private</span>:
<a name="l00785"></a>00785   <a class="code" href="classWarning__info.html">Warning_info</a> *get_warning_info() { <span class="keywordflow">return</span> m_wi_stack.front(); }
<a name="l00786"></a>00786 
<a name="l00787"></a>00787   <span class="keyword">const</span> <a class="code" href="classWarning__info.html">Warning_info</a> *get_warning_info()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_wi_stack.front(); }
<a name="l00788"></a>00788 
<a name="l00789"></a>00789 <span class="keyword">private</span>:
<a name="l00791"></a>00791   <span class="keywordtype">bool</span> m_is_sent;
<a name="l00792"></a>00792 
<a name="l00794"></a>00794   <span class="keywordtype">bool</span> m_can_overwrite_status;
<a name="l00795"></a>00795 
<a name="l00797"></a>00797   <span class="keywordtype">char</span> m_message[MYSQL_ERRMSG_SIZE];
<a name="l00798"></a>00798 
<a name="l00803"></a>00803   uint m_sql_errno;
<a name="l00804"></a>00804 
<a name="l00805"></a>00805   <span class="keywordtype">char</span> m_sqlstate[SQLSTATE_LENGTH+1];
<a name="l00806"></a>00806 
<a name="l00818"></a>00818   ulonglong    m_affected_rows;
<a name="l00819"></a>00819 
<a name="l00825"></a>00825   ulonglong   m_last_insert_id;
<a name="l00826"></a>00826 
<a name="l00833"></a>00833   uint       m_statement_warn_count;
<a name="l00834"></a>00834 
<a name="l00835"></a>00835   <a class="code" href="classDiagnostics__area.html#a841a3c3b3036d95e150bbea3e2c4f131">enum_diagnostics_status</a> m_status;
<a name="l00836"></a>00836 
<a name="l00837"></a>00837   <a class="code" href="classWarning__info.html">Warning_info</a> m_main_wi;
<a name="l00838"></a>00838 
<a name="l00839"></a>00839   Warning_info_list m_wi_stack;
<a name="l00840"></a>00840 };
<a name="l00841"></a>00841 
<a name="l00843"></a>00843 
<a name="l00844"></a>00844 
<a name="l00845"></a>00845 <span class="keywordtype">void</span> push_warning(THD *thd, Sql_condition::enum_warning_level level,
<a name="l00846"></a>00846                   uint code, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg);
<a name="l00847"></a>00847 
<a name="l00848"></a>00848 <span class="keywordtype">void</span> push_warning_printf(THD *thd, Sql_condition::enum_warning_level level,
<a name="l00849"></a>00849                          uint code, <span class="keyword">const</span> <span class="keywordtype">char</span> *format, ...);
<a name="l00850"></a>00850 
<a name="l00851"></a>00851 <span class="keywordtype">bool</span> mysqld_show_warnings(THD *thd, ulong levels_to_show);
<a name="l00852"></a>00852 
<a name="l00853"></a>00853 uint32 convert_error_message(<span class="keywordtype">char</span> *to, uint32 to_length,
<a name="l00854"></a>00854                              <span class="keyword">const</span> CHARSET_INFO *to_cs,
<a name="l00855"></a>00855                              <span class="keyword">const</span> <span class="keywordtype">char</span> *from, uint32 from_length,
<a name="l00856"></a>00856                              <span class="keyword">const</span> CHARSET_INFO *from_cs, uint *errors);
<a name="l00857"></a>00857 
<a name="l00858"></a>00858 <span class="keyword">extern</span> <span class="keyword">const</span> LEX_STRING warning_level_names[];
<a name="l00859"></a>00859 
<a name="l00860"></a>00860 <span class="keywordtype">bool</span> is_sqlstate_valid(<span class="keyword">const</span> LEX_STRING *sqlstate);
<a name="l00861"></a>00861 
<a name="l00862"></a>00862 
<a name="l00872"></a>00872 <span class="keyword">inline</span> <span class="keywordtype">bool</span> is_sqlstate_completion(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)
<a name="l00873"></a>00873 { <span class="keywordflow">return</span> s[0] == <span class="charliteral">&#39;0&#39;</span> &amp;&amp; s[1] == <span class="charliteral">&#39;0&#39;</span>; }
<a name="l00874"></a>00874 
<a name="l00875"></a>00875 
<a name="l00885"></a>00885 <span class="keyword">inline</span> <span class="keywordtype">bool</span> is_sqlstate_warning(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)
<a name="l00886"></a>00886 { <span class="keywordflow">return</span> s[0] == <span class="charliteral">&#39;0&#39;</span> &amp;&amp; s[1] == <span class="charliteral">&#39;1&#39;</span>; }
<a name="l00887"></a>00887 
<a name="l00888"></a>00888 
<a name="l00898"></a>00898 <span class="keyword">inline</span> <span class="keywordtype">bool</span> is_sqlstate_not_found(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)
<a name="l00899"></a>00899 { <span class="keywordflow">return</span> s[0] == <span class="charliteral">&#39;0&#39;</span> &amp;&amp; s[1] == <span class="charliteral">&#39;2&#39;</span>; }
<a name="l00900"></a>00900 
<a name="l00901"></a>00901 
<a name="l00911"></a>00911 <span class="keyword">inline</span> <span class="keywordtype">bool</span> is_sqlstate_exception(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)
<a name="l00912"></a>00912 { <span class="keywordflow">return</span> s[0] != <span class="charliteral">&#39;0&#39;</span> || s[1] &gt; <span class="charliteral">&#39;2&#39;</span>; }
<a name="l00913"></a>00913 
<a name="l00914"></a>00914 
<a name="l00915"></a>00915 <span class="preprocessor">#endif // SQL_ERROR_H</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 16 2015 12:34:46 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
