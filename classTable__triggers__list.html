<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: Table_triggers_list Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">Table_triggers_list Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="Table_triggers_list" --><!-- doxytag: inherits="Sql_alloc" -->
<p><code>#include &lt;<a class="el" href="sql__trigger_8h_source.html">sql_trigger.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Table_triggers_list:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classTable__triggers__list.png" usemap="#Table_triggers_list_map" alt=""/>
  <map id="Table_triggers_list_map" name="Table_triggers_list_map">
<area href="classSql__alloc.html" alt="Sql_alloc" shape="rect" coords="0,0,115,24"/>
</map>
 </div></div>

<p><a href="classTable__triggers__list-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a56fff87bb8e84350db257deb8cfdb9e5"></a><!-- doxytag: member="Table_triggers_list::Table_triggers_list" ref="a56fff87bb8e84350db257deb8cfdb9e5" args="(TABLE *table_arg)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>Table_triggers_list</b> (<a class="el" href="structTABLE.html">TABLE</a> *table_arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a116e8840c84c21bd976e4c0422ff6885">create_trigger</a> (THD *thd, <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *table, <a class="el" href="classString.html">String</a> *stmt_query)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a5dd5facac52475db6b2e850519377271">drop_trigger</a> (THD *thd, <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *table, <a class="el" href="classString.html">String</a> *stmt_query)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#aa0d42f7fa694aef03cf66847ac51d085">process_triggers</a> (THD *thd, trg_event_type event, trg_action_time_type time_type, bool old_row_is_record1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a4ff075fae21fc6fc1e429a231356b890">get_trigger_info</a> (THD *thd, trg_event_type event, trg_action_time_type time_type, LEX_STRING *trigger_name, LEX_STRING *trigger_stmt, sql_mode_t *sql_mode, LEX_STRING *definer, LEX_STRING *client_cs_name, LEX_STRING *connection_cl_name, LEX_STRING *db_cl_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab37b75be1c2ba7b23c410a3ecbcdb971"></a><!-- doxytag: member="Table_triggers_list::get_trigger_info" ref="ab37b75be1c2ba7b23c410a3ecbcdb971" args="(THD *thd, int trigger_idx, LEX_STRING *trigger_name, sql_mode_t *sql_mode, LEX_STRING *sql_original_stmt, LEX_STRING *client_cs_name, LEX_STRING *connection_cl_name, LEX_STRING *db_cl_name)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>get_trigger_info</b> (THD *thd, int trigger_idx, LEX_STRING *trigger_name, sql_mode_t *sql_mode, LEX_STRING *sql_original_stmt, LEX_STRING *client_cs_name, LEX_STRING *connection_cl_name, LEX_STRING *db_cl_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab19a5dc1fb925feae41dfa8b6eff10cb"></a><!-- doxytag: member="Table_triggers_list::find_trigger_by_name" ref="ab19a5dc1fb925feae41dfa8b6eff10cb" args="(const LEX_STRING *trigger_name)" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>find_trigger_by_name</b> (const LEX_STRING *trigger_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab0d37bdbcd7661542d78f02154e1b043"></a><!-- doxytag: member="Table_triggers_list::has_triggers" ref="ab0d37bdbcd7661542d78f02154e1b043" args="(trg_event_type event_type, trg_action_time_type action_time)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_triggers</b> (trg_event_type event_type, trg_action_time_type action_time)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88be1baa40c546e11ef2927ef4afdc2f"></a><!-- doxytag: member="Table_triggers_list::has_delete_triggers" ref="a88be1baa40c546e11ef2927ef4afdc2f" args="()" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_delete_triggers</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a40564e0133a6a6b21a795e2a1be45f40"></a><!-- doxytag: member="Table_triggers_list::has_update_triggers" ref="a40564e0133a6a6b21a795e2a1be45f40" args="()" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_update_triggers</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#af00c6de5ce6c9163b7b27df3b8990f58">set_table</a> (<a class="el" href="structTABLE.html">TABLE</a> *new_table)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a25c331803aae7afd1ba86ba3ee5cad72">mark_fields_used</a> (trg_event_type event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a8fa60fbd8358d54f55f0c1d8472593f6">set_parse_error_message</a> (char *error_message)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#ab66b78bd169a61006e433fb1a7adf728">add_tables_and_routines_for_triggers</a> (THD *thd, Query_tables_list *prelocking_ctx, <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *table_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a010f323c2df6cb7c15d3300ddf9e2793">is_fields_updated_in_trigger</a> (MY_BITMAP *used_fields, trg_event_type event_type, trg_action_time_type action_time)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#ac2d1d5b25d9bb266b0ee2c060561caf4">check_n_load</a> (THD *thd, const char *db, const char *table_name, <a class="el" href="structTABLE.html">TABLE</a> *table, bool names_only)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#ae233848ced378ef41f994530ef231207">drop_all_triggers</a> (THD *thd, char *db, char *table_name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a03277a828971d1191eec8ee229187928">change_table_name</a> (THD *thd, const char *db, const char *old_alias, const char *old_table, const char *new_db, const char *new_table)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a65455442307e7d72af57fe1b93d63258">trigger_table</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structst__grant__info.html">GRANT_INFO</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a66004fb866706ba05eaa0e0728033480">subject_table_grants</a> [TRG_EVENT_MAX][TRG_ACTION_MAX]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classList.html">List</a>&lt; LEX_STRING &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#a21b99420fd0180e64a0a1d22f7c826f7">definitions_list</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classList.html">List</a>&lt; ulonglong &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTable__triggers__list.html#af0fb46f378f037db654c604a585d8dfe">definition_modes_list</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a398376a442411c9c56c698a10624cecc"></a><!-- doxytag: member="Table_triggers_list::definers_list" ref="a398376a442411c9c56c698a10624cecc" args="" -->
<a class="el" href="classList.html">List</a>&lt; LEX_STRING &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>definers_list</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a44cfade6a2749777201e7e2230be92fd"></a><!-- doxytag: member="Table_triggers_list::client_cs_names" ref="a44cfade6a2749777201e7e2230be92fd" args="" -->
<a class="el" href="classList.html">List</a>&lt; LEX_STRING &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>client_cs_names</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17b8d091a8a6446898cd311ee6fea741"></a><!-- doxytag: member="Table_triggers_list::connection_cl_names" ref="a17b8d091a8a6446898cd311ee6fea741" args="" -->
<a class="el" href="classList.html">List</a>&lt; LEX_STRING &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>connection_cl_names</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48f043254406a527c225020e3a8fb4ae"></a><!-- doxytag: member="Table_triggers_list::db_cl_names" ref="a48f043254406a527c225020e3a8fb4ae" args="" -->
<a class="el" href="classList.html">List</a>&lt; LEX_STRING &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>db_cl_names</b></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7ca8b01f9b00e1cfbdfb3a9fcad49b82"></a><!-- doxytag: member="Table_triggers_list::Item_trigger_field" ref="a7ca8b01f9b00e1cfbdfb3a9fcad49b82" args="" -->
class&#160;</td><td class="memItemRight" valign="bottom"><b>Item_trigger_field</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class holds all information about triggers of table.</p>
<p>QQ: Will it be merged into <a class="el" href="structTABLE.html">TABLE</a> in the future ? </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab66b78bd169a61006e433fb1a7adf728"></a><!-- doxytag: member="Table_triggers_list::add_tables_and_routines_for_triggers" ref="ab66b78bd169a61006e433fb1a7adf728" args="(THD *thd, Query_tables_list *prelocking_ctx, TABLE_LIST *table_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTable__triggers__list.html#ab66b78bd169a61006e433fb1a7adf728">Table_triggers_list::add_tables_and_routines_for_triggers</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Query_tables_list *&#160;</td>
          <td class="paramname"><em>prelocking_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>table_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add triggers for table to the set of routines used by statement. Add tables used by them to statement table list. Do the same for routines used by triggers.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread context. </td></tr>
    <tr><td class="paramname">prelocking_ctx</td><td>Prelocking context of the statement. </td></tr>
    <tr><td class="paramname">table_list</td><td>Table list element for table with trigger.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>Success. </td></tr>
    <tr><td class="paramname">TRUE</td><td>Failure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a03277a828971d1191eec8ee229187928"></a><!-- doxytag: member="Table_triggers_list::change_table_name" ref="a03277a828971d1191eec8ee229187928" args="(THD *thd, const char *db, const char *old_alias, const char *old_table, const char *new_db, const char *new_table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTable__triggers__list.html#a03277a828971d1191eec8ee229187928">Table_triggers_list::change_table_name</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_alias</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Update .TRG and .TRN files after renaming triggers' subject table.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">thd</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">db</td><td>Old database of subject table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_alias</td><td>Old alias of subject table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_table</td><td>Old name of subject table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_db</td><td>New database for subject table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_table</td><td>New name of subject table</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This method tries to leave trigger related files in consistent state, i.e. it either will complete successfully, or will fail leaving files in their initial state. Also this method assumes that subject table is not renamed to itself. This method needs to be called under an exclusive table metadata lock.</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>Success </td></tr>
    <tr><td class="paramname">TRUE</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac2d1d5b25d9bb266b0ee2c060561caf4"></a><!-- doxytag: member="Table_triggers_list::check_n_load" ref="ac2d1d5b25d9bb266b0ee2c060561caf4" args="(THD *thd, const char *db, const char *table_name, TABLE *table, bool names_only)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTable__triggers__list.html#ac2d1d5b25d9bb266b0ee2c060561caf4">Table_triggers_list::check_n_load</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>names_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check whenever .TRG file for table exist and load all triggers it contains.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>current thread context </td></tr>
    <tr><td class="paramname">db</td><td>table's database name </td></tr>
    <tr><td class="paramname">table_name</td><td>table's name </td></tr>
    <tr><td class="paramname">table</td><td>pointer to table object </td></tr>
    <tr><td class="paramname">names_only</td><td>stop after loading trigger names</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000111">Todo:</a></b></dt><dd>A lot of things to do here e.g. how about other funcs and being more paranoical ?</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000112">Todo:</a></b></dt><dd>This could be avoided if there is no triggers for UPDATE and DELETE.</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">False</td><td>success </td></tr>
    <tr><td class="paramname">True</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a116e8840c84c21bd976e4c0422ff6885"></a><!-- doxytag: member="Table_triggers_list::create_trigger" ref="a116e8840c84c21bd976e4c0422ff6885" args="(THD *thd, TABLE_LIST *table, String *stmt_query)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTable__triggers__list.html#a116e8840c84c21bd976e4c0422ff6885">Table_triggers_list::create_trigger</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classString.html">String</a> *&#160;</td>
          <td class="paramname"><em>stmt_query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create trigger for table.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">thd</td><td>current thread context (including trigger definition in LEX) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">tables</td><td>table list containing one open table for which the trigger is created. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">stmt_query</td><td>after successful return, this string contains well-formed statement for creation this trigger.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>Assumes that trigger name is fully qualified.</li>
<li>NULL-string means the following LEX_STRING instance: { str = 0; length = 0 }.</li>
<li>In other words, definer_user and definer_host should contain simultaneously NULL-strings (non-SUID/old trigger) or valid strings (SUID/new trigger).</li>
</ul>
</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">False</td><td>success </td></tr>
    <tr><td class="paramname">True</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae233848ced378ef41f994530ef231207"></a><!-- doxytag: member="Table_triggers_list::drop_all_triggers" ref="ae233848ced378ef41f994530ef231207" args="(THD *thd, char *db, char *table_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTable__triggers__list.html#ae233848ced378ef41f994530ef231207">Table_triggers_list::drop_all_triggers</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Drop all triggers for table.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>current thread context </td></tr>
    <tr><td class="paramname">db</td><td>schema for table </td></tr>
    <tr><td class="paramname">name</td><td>name for table</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">False</td><td>success </td></tr>
    <tr><td class="paramname">True</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5dd5facac52475db6b2e850519377271"></a><!-- doxytag: member="Table_triggers_list::drop_trigger" ref="a5dd5facac52475db6b2e850519377271" args="(THD *thd, TABLE_LIST *table, String *stmt_query)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTable__triggers__list.html#a5dd5facac52475db6b2e850519377271">Table_triggers_list::drop_trigger</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classString.html">String</a> *&#160;</td>
          <td class="paramname"><em>stmt_query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Drop trigger for table.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">thd</td><td>current thread context (including trigger definition in LEX) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">tables</td><td>table list containing one open table for which trigger is dropped. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">stmt_query</td><td>after successful return, this string contains well-formed statement for creation this trigger.</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000110">Todo:</a></b></dt><dd>Probably instead of removing .TRG file we should move to archive directory but this should be done as part of <a class="el" href="parse__file_8cc.html" title="Text .frm files management routines.">parse_file.cc</a> functionality (because we will need it elsewhere).</dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">False</td><td>success </td></tr>
    <tr><td class="paramname">True</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4ff075fae21fc6fc1e429a231356b890"></a><!-- doxytag: member="Table_triggers_list::get_trigger_info" ref="a4ff075fae21fc6fc1e429a231356b890" args="(THD *thd, trg_event_type event, trg_action_time_type time_type, LEX_STRING *trigger_name, LEX_STRING *trigger_stmt, sql_mode_t *sql_mode, LEX_STRING *definer, LEX_STRING *client_cs_name, LEX_STRING *connection_cl_name, LEX_STRING *db_cl_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTable__triggers__list.html#a4ff075fae21fc6fc1e429a231356b890">Table_triggers_list::get_trigger_info</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">trg_event_type&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">trg_action_time_type&#160;</td>
          <td class="paramname"><em>time_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LEX_STRING *&#160;</td>
          <td class="paramname"><em>trigger_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LEX_STRING *&#160;</td>
          <td class="paramname"><em>trigger_stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sql_mode_t *&#160;</td>
          <td class="paramname"><em>sql_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LEX_STRING *&#160;</td>
          <td class="paramname"><em>definer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LEX_STRING *&#160;</td>
          <td class="paramname"><em>client_cs_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LEX_STRING *&#160;</td>
          <td class="paramname"><em>connection_cl_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LEX_STRING *&#160;</td>
          <td class="paramname"><em>db_cl_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Obtains and returns trigger metadata.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>current thread context </td></tr>
    <tr><td class="paramname">event</td><td>trigger event type </td></tr>
    <tr><td class="paramname">time_type</td><td>trigger action time </td></tr>
    <tr><td class="paramname">trigger_name</td><td>returns name of trigger </td></tr>
    <tr><td class="paramname">trigger_stmt</td><td>returns statement of trigger </td></tr>
    <tr><td class="paramname">sql_mode</td><td>returns sql_mode of trigger </td></tr>
    <tr><td class="paramname">definer</td><td>returns definer/creator of trigger. The caller is responsible to allocate enough space for storing definer information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">False</td><td>success </td></tr>
    <tr><td class="paramname">True</td><td>error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a010f323c2df6cb7c15d3300ddf9e2793"></a><!-- doxytag: member="Table_triggers_list::is_fields_updated_in_trigger" ref="a010f323c2df6cb7c15d3300ddf9e2793" args="(MY_BITMAP *used_fields, trg_event_type event_type, trg_action_time_type action_time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTable__triggers__list.html#a010f323c2df6cb7c15d3300ddf9e2793">Table_triggers_list::is_fields_updated_in_trigger</a> </td>
          <td>(</td>
          <td class="paramtype">MY_BITMAP *&#160;</td>
          <td class="paramname"><em>used_fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">trg_event_type&#160;</td>
          <td class="paramname"><em>event_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">trg_action_time_type&#160;</td>
          <td class="paramname"><em>action_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check if any of the marked fields are used in the trigger.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">used_fields</td><td><a class="el" href="classBitmap.html">Bitmap</a> over fields to check </td></tr>
    <tr><td class="paramname">event_type</td><td>Type of event triggers for which we are going to inspect </td></tr>
    <tr><td class="paramname">action_time</td><td>Type of trigger action time we are going to inspect </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a25c331803aae7afd1ba86ba3ee5cad72"></a><!-- doxytag: member="Table_triggers_list::mark_fields_used" ref="a25c331803aae7afd1ba86ba3ee5cad72" args="(trg_event_type event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classTable__triggers__list.html#a25c331803aae7afd1ba86ba3ee5cad72">Table_triggers_list::mark_fields_used</a> </td>
          <td>(</td>
          <td class="paramtype">trg_event_type&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mark fields of subject table which we read/set in its triggers as such.</p>
<p>This method marks fields of subject table which are read/set in its triggers as such (by properly updating TABLE::read_set/write_set) and thus informs handler that values for these fields should be retrieved/stored during execution of statement.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>Type of event triggers for which we are going to inspect </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa0d42f7fa694aef03cf66847ac51d085"></a><!-- doxytag: member="Table_triggers_list::process_triggers" ref="aa0d42f7fa694aef03cf66847ac51d085" args="(THD *thd, trg_event_type event, trg_action_time_type time_type, bool old_row_is_record1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classTable__triggers__list.html#aa0d42f7fa694aef03cf66847ac51d085">Table_triggers_list::process_triggers</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">trg_event_type&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">trg_action_time_type&#160;</td>
          <td class="paramname"><em>time_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>old_row_is_record1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Execute trigger for given (event, time) pair.</p>
<p>The operation executes trigger for the specified event (insert, update, delete) and time (after, before) if it is set.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td></td></tr>
    <tr><td class="paramname">event</td><td></td></tr>
    <tr><td class="paramname">time_type</td><td></td></tr>
    <tr><td class="paramname">old_row_is_record1</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Error status. </dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">FALSE</td><td>on success. </td></tr>
    <tr><td class="paramname">TRUE</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8fa60fbd8358d54f55f0c1d8472593f6"></a><!-- doxytag: member="Table_triggers_list::set_parse_error_message" ref="a8fa60fbd8358d54f55f0c1d8472593f6" args="(char *error_message)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classTable__triggers__list.html#a8fa60fbd8358d54f55f0c1d8472593f6">Table_triggers_list::set_parse_error_message</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>error_message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Signals to the <a class="el" href="classTable__triggers__list.html">Table_triggers_list</a> that a parse error has occured when reading a trigger from file. This makes the <a class="el" href="classTable__triggers__list.html">Table_triggers_list</a> enter an error state flagged by m_has_unparseable_trigger == true. The error message will be used whenever a statement invoking or manipulating triggers is issued against the <a class="el" href="classTable__triggers__list.html">Table_triggers_list</a>'s table.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">error_message</td><td>The error message thrown by the parser. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af00c6de5ce6c9163b7b27df3b8990f58"></a><!-- doxytag: member="Table_triggers_list::set_table" ref="af00c6de5ce6c9163b7b27df3b8990f58" args="(TABLE *new_table)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classTable__triggers__list.html#af00c6de5ce6c9163b7b27df3b8990f58">Table_triggers_list::set_table</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>new_table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adjust <a class="el" href="classTable__triggers__list.html">Table_triggers_list</a> with new <a class="el" href="structTABLE.html">TABLE</a> pointer.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">new_table</td><td>new pointer to <a class="el" href="structTABLE.html">TABLE</a> instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="af0fb46f378f037db654c604a585d8dfe"></a><!-- doxytag: member="Table_triggers_list::definition_modes_list" ref="af0fb46f378f037db654c604a585d8dfe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classList.html">List</a>&lt;ulonglong&gt; <a class="el" href="classTable__triggers__list.html#af0fb46f378f037db654c604a585d8dfe">Table_triggers_list::definition_modes_list</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classList.html">List</a> of sql modes for triggers </p>

</div>
</div>
<a class="anchor" id="a21b99420fd0180e64a0a1d22f7c826f7"></a><!-- doxytag: member="Table_triggers_list::definitions_list" ref="a21b99420fd0180e64a0a1d22f7c826f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classList.html">List</a>&lt;LEX_STRING&gt; <a class="el" href="classTable__triggers__list.html#a21b99420fd0180e64a0a1d22f7c826f7">Table_triggers_list::definitions_list</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classField.html">Field</a> responsible for storing triggers definitions in file. It have to be public because we are using it directly from parser. </p>

</div>
</div>
<a class="anchor" id="a66004fb866706ba05eaa0e0728033480"></a><!-- doxytag: member="Table_triggers_list::subject_table_grants" ref="a66004fb866706ba05eaa0e0728033480" args="[TRG_EVENT_MAX][TRG_ACTION_MAX]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structst__grant__info.html">GRANT_INFO</a> <a class="el" href="classTable__triggers__list.html#a66004fb866706ba05eaa0e0728033480">Table_triggers_list::subject_table_grants</a>[TRG_EVENT_MAX][TRG_ACTION_MAX]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Grant information for each trigger (pair: subject table, trigger definer). </p>

</div>
</div>
<a class="anchor" id="a65455442307e7d72af57fe1b93d63258"></a><!-- doxytag: member="Table_triggers_list::trigger_table" ref="a65455442307e7d72af57fe1b93d63258" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTABLE.html">TABLE</a>* <a class="el" href="classTable__triggers__list.html#a65455442307e7d72af57fe1b93d63258">Table_triggers_list::trigger_table</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="structTABLE.html">TABLE</a> instance for which this triggers list object was created. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="sql__trigger_8h_source.html">sql_trigger.h</a></li>
<li>sql_trigger.cc</li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 16 2015 12:37:36 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
