<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: sp_pcontext Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">sp_pcontext Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="sp_pcontext" --><!-- doxytag: inherits="Sql_alloc" -->
<p><code>#include &lt;<a class="el" href="sp__pcontext_8h_source.html">sp_pcontext.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for sp_pcontext:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classsp__pcontext.png" usemap="#sp_pcontext_map" alt=""/>
  <map id="sp_pcontext_map" name="sp_pcontext_map">
<area href="classSql__alloc.html" alt="Sql_alloc" shape="rect" coords="0,0,79,24"/>
</map>
 </div></div>

<p><a href="classsp__pcontext-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a6252258e34c191cbf1b5e86628cd29c6">enum_scope</a> { <a class="el" href="classsp__pcontext.html#a6252258e34c191cbf1b5e86628cd29c6a7eefe8effea203d6409e38ddb6052d6f">REGULAR_SCOPE</a>, 
<a class="el" href="classsp__pcontext.html#a6252258e34c191cbf1b5e86628cd29c6a2db8d8068bbaf5f7f9b60edded7b0bf6">HANDLER_SCOPE</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsp__pcontext.html">sp_pcontext</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a486b4feb63c343fea40adcf197bde017">push_context</a> (THD *thd, <a class="el" href="classsp__pcontext.html#a6252258e34c191cbf1b5e86628cd29c6">enum_scope</a> scope)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and push a new context in the tree.  <a href="#a486b4feb63c343fea40adcf197bde017"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsp__pcontext.html">sp_pcontext</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#ae7e4af2bd11d58a2950462a490612a31">pop_context</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c1c9e2db366551e033e843253ae4e6e"></a><!-- doxytag: member="sp_pcontext::parent_context" ref="a0c1c9e2db366551e033e843253ae4e6e" args="() const " -->
<a class="el" href="classsp__pcontext.html">sp_pcontext</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>parent_context</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ac468f5a9986244aad31db1b4012799"></a><!-- doxytag: member="sp_pcontext::get_level" ref="a6ac468f5a9986244aad31db1b4012799" args="() const " -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>get_level</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a78b9d3135fc244e02d1af52010802adb">diff_handlers</a> (const <a class="el" href="classsp__pcontext.html">sp_pcontext</a> *ctx, bool exclusive) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a798a503efdaa0f3e96909f24b9293595">diff_cursors</a> (const <a class="el" href="classsp__pcontext.html">sp_pcontext</a> *ctx, bool exclusive) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a7eb079b6c74727c9f1f41a5dbfb1af64">max_var_index</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a1f32e83932496c0b37f687fb485fc824">current_var_count</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a99788ecb09e0b2dfbe4d49238e2d0754">context_var_count</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#ab65699bfa6c23e807a299280997d5db1">var_context2runtime</a> (uint i) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsp__variable.html">sp_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a720325b7d8acd08f7ed7701c8befb6ec">add_variable</a> (THD *thd, LEX_STRING name, enum enum_field_types type, sp_variable::enum_mode mode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#ac74f6b8abd919afd9619fca234cf958f">retrieve_field_definitions</a> (<a class="el" href="classList.html">List</a>&lt; <a class="el" href="classCreate__field.html">Create_field</a> &gt; *field_def_lst) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsp__variable.html">sp_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a20b41a193c8cbd622730f12117e57cc8">find_variable</a> (LEX_STRING name, bool current_scope_only) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsp__variable.html">sp_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a8f43fae8eea9ae1b1949d632159366d8">find_variable</a> (uint offset) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a480a92643ee11341486f2ed2aec31593">declare_var_boundary</a> (uint n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a11ce726312695b1db3506d9fe8fd7559"></a><!-- doxytag: member="sp_pcontext::get_num_case_exprs" ref="a11ce726312695b1db3506d9fe8fd7559" args="() const " -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>get_num_case_exprs</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4878c45987da9a7b5503ea3703c33f5a"></a><!-- doxytag: member="sp_pcontext::push_case_expr_id" ref="a4878c45987da9a7b5503ea3703c33f5a" args="()" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>push_case_expr_id</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4dece7ec7dfe72bdc7563ec1e59afb38"></a><!-- doxytag: member="sp_pcontext::pop_case_expr_id" ref="a4dece7ec7dfe72bdc7563ec1e59afb38" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>pop_case_expr_id</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a509a7e07a05be1672494a50fdc4d83a0"></a><!-- doxytag: member="sp_pcontext::get_current_case_expr_id" ref="a509a7e07a05be1672494a50fdc4d83a0" args="() const " -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>get_current_case_expr_id</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ade6f3e4779c4fa3991dff527ed2d2047"></a><!-- doxytag: member="sp_pcontext::push_label" ref="ade6f3e4779c4fa3991dff527ed2d2047" args="(THD *thd, LEX_STRING name, uint ip)" -->
<a class="el" href="classsp__label.html">sp_label</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>push_label</b> (THD *thd, LEX_STRING name, uint ip)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac2353f5c480f283fc626f0aad8543237"></a><!-- doxytag: member="sp_pcontext::find_label" ref="ac2353f5c480f283fc626f0aad8543237" args="(LEX_STRING name)" -->
<a class="el" href="classsp__label.html">sp_label</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>find_label</b> (LEX_STRING name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a31c0db7687db96154add9e2e79718e27"></a><!-- doxytag: member="sp_pcontext::last_label" ref="a31c0db7687db96154add9e2e79718e27" args="()" -->
<a class="el" href="classsp__label.html">sp_label</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>last_label</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9744a4b041c7fa2d8413b84ab5bac712"></a><!-- doxytag: member="sp_pcontext::pop_label" ref="a9744a4b041c7fa2d8413b84ab5bac712" args="()" -->
<a class="el" href="classsp__label.html">sp_label</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>pop_label</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a81bf4ae0fe08bdcd267d00b55249d4fa"></a><!-- doxytag: member="sp_pcontext::add_condition" ref="a81bf4ae0fe08bdcd267d00b55249d4fa" args="(THD *thd, LEX_STRING name, sp_condition_value *value)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>add_condition</b> (THD *thd, LEX_STRING name, <a class="el" href="classsp__condition__value.html">sp_condition_value</a> *value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afb6b71e8118c25b1ba15ed54f2f909ff"></a><!-- doxytag: member="sp_pcontext::find_condition" ref="afb6b71e8118c25b1ba15ed54f2f909ff" args="(LEX_STRING name, bool current_scope_only) const " -->
<a class="el" href="classsp__condition__value.html">sp_condition_value</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#afb6b71e8118c25b1ba15ed54f2f909ff">find_condition</a> (LEX_STRING name, bool current_scope_only) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">See comment for <a class="el" href="classsp__pcontext.html#a20b41a193c8cbd622730f12117e57cc8">find_variable()</a> above. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f68eddde53c9ac83544d6daab8b4f7a"></a><!-- doxytag: member="sp_pcontext::add_handler" ref="a8f68eddde53c9ac83544d6daab8b4f7a" args="(THD *thd, sp_handler::enum_type type)" -->
<a class="el" href="classsp__handler.html">sp_handler</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>add_handler</b> (THD *thd, <a class="el" href="classsp__handler.html#a702400dd1cd8b2933a38a9e4a5f1eb09">sp_handler::enum_type</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a88d65a8a0ce7eaf9e21bdbbfdea42e8a">check_duplicate_handler</a> (const <a class="el" href="classsp__condition__value.html">sp_condition_value</a> *cond_value) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsp__handler.html">sp_handler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#a7cae2a84262f85ce6d22edcbb508b77c">find_handler</a> (const char *sql_state, uint sql_errno, Sql_condition::enum_warning_level level) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5c6665a1f12a14131c9a8e6efec39007"></a><!-- doxytag: member="sp_pcontext::add_cursor" ref="a5c6665a1f12a14131c9a8e6efec39007" args="(LEX_STRING name)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>add_cursor</b> (LEX_STRING name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acec0d0123a1a5c2347fde51017096f35"></a><!-- doxytag: member="sp_pcontext::find_cursor" ref="acec0d0123a1a5c2347fde51017096f35" args="(LEX_STRING name, uint *poff, bool current_scope_only) const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#acec0d0123a1a5c2347fde51017096f35">find_cursor</a> (LEX_STRING name, uint *poff, bool current_scope_only) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">See comment for <a class="el" href="classsp__pcontext.html#a20b41a193c8cbd622730f12117e57cc8">find_variable()</a> above. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adb290d140480e8e2fc87d7827907a557"></a><!-- doxytag: member="sp_pcontext::find_cursor" ref="adb290d140480e8e2fc87d7827907a557" args="(uint offset) const " -->
const LEX_STRING *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsp__pcontext.html#adb290d140480e8e2fc87d7827907a557">find_cursor</a> (uint offset) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Find cursor by offset (for debugging only). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a708d7e65cf29e2cb968a61902874c04e"></a><!-- doxytag: member="sp_pcontext::max_cursor_index" ref="a708d7e65cf29e2cb968a61902874c04e" args="() const " -->
uint&#160;</td><td class="memItemRight" valign="bottom"><b>max_cursor_index</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a0a617f7a53a04bd4afa9db46249426"></a><!-- doxytag: member="sp_pcontext::current_cursor_count" ref="a6a0a617f7a53a04bd4afa9db46249426" args="() const " -->
uint&#160;</td><td class="memItemRight" valign="bottom"><b>current_cursor_count</b> () const </td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The class represents parse-time context, which keeps track of declared variables/parameters, conditions, handlers, cursors and labels.</p>
<p>sp_context objects are organized in a tree according to the following rules:</p>
<ul>
<li>one <a class="el" href="classsp__pcontext.html">sp_pcontext</a> object corresponds for for each BEGIN..END block;</li>
<li>one <a class="el" href="classsp__pcontext.html">sp_pcontext</a> object corresponds for each exception handler;</li>
<li>one additional <a class="el" href="classsp__pcontext.html">sp_pcontext</a> object is created to contain Stored Program parameters.</li>
</ul>
<p><a class="el" href="classsp__pcontext.html">sp_pcontext</a> objects are used both at parse-time and at runtime.</p>
<p>During the parsing stage <a class="el" href="classsp__pcontext.html">sp_pcontext</a> objects are used:</p>
<ul>
<li>to look up defined names (e.g. declared variables and visible labels);</li>
<li>to check for duplicates;</li>
<li>for error checking;</li>
<li>to calculate offsets to be used at runtime.</li>
</ul>
<p>During the runtime phase, a tree of <a class="el" href="classsp__pcontext.html">sp_pcontext</a> objects is used:</p>
<ul>
<li>for error checking (e.g. to check correct number of parameters);</li>
<li>to resolve SQL-handlers. </li>
</ul>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a6252258e34c191cbf1b5e86628cd29c6"></a><!-- doxytag: member="sp_pcontext::enum_scope" ref="a6252258e34c191cbf1b5e86628cd29c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classsp__pcontext.html#a6252258e34c191cbf1b5e86628cd29c6">sp_pcontext::enum_scope</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a6252258e34c191cbf1b5e86628cd29c6a7eefe8effea203d6409e38ddb6052d6f"></a><!-- doxytag: member="REGULAR_SCOPE" ref="a6252258e34c191cbf1b5e86628cd29c6a7eefe8effea203d6409e38ddb6052d6f" args="" -->REGULAR_SCOPE</em>&nbsp;</td><td>
<p>REGULAR_SCOPE designates regular BEGIN ... END blocks. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a6252258e34c191cbf1b5e86628cd29c6a2db8d8068bbaf5f7f9b60edded7b0bf6"></a><!-- doxytag: member="HANDLER_SCOPE" ref="a6252258e34c191cbf1b5e86628cd29c6a2db8d8068bbaf5f7f9b60edded7b0bf6" args="" -->HANDLER_SCOPE</em>&nbsp;</td><td>
<p>HANDLER_SCOPE designates SQL-handler blocks. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a720325b7d8acd08f7ed7701c8befb6ec"></a><!-- doxytag: member="sp_pcontext::add_variable" ref="a720325b7d8acd08f7ed7701c8befb6ec" args="(THD *thd, LEX_STRING name, enum enum_field_types type, sp_variable::enum_mode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsp__variable.html">sp_variable</a> * <a class="el" href="classsp__pcontext.html#a720325b7d8acd08f7ed7701c8befb6ec">sp_pcontext::add_variable</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LEX_STRING&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum enum_field_types&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sp_variable::enum_mode&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add SP-variable to the parsing context.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread context. </td></tr>
    <tr><td class="paramname">name</td><td>Name of the SP-variable. </td></tr>
    <tr><td class="paramname">type</td><td>Type of the SP-variable. </td></tr>
    <tr><td class="paramname">mode</td><td>Mode of the SP-variable.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>instance of newly added SP-variable. </dd></dl>

</div>
</div>
<a class="anchor" id="a88d65a8a0ce7eaf9e21bdbbfdea42e8a"></a><!-- doxytag: member="sp_pcontext::check_duplicate_handler" ref="a88d65a8a0ce7eaf9e21bdbbfdea42e8a" args="(const sp_condition_value *cond_value) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classsp__pcontext.html#a88d65a8a0ce7eaf9e21bdbbfdea42e8a">sp_pcontext::check_duplicate_handler</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsp__condition__value.html">sp_condition_value</a> *&#160;</td>
          <td class="paramname"><em>cond_value</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is an auxilary parsing-time function to check if an SQL-handler exists in the current parsing context (current scope) for the given SQL-condition. This function is used to check for duplicates during the parsing phase.</p>
<p>This function can not be used during the runtime phase to check SQL-handler existence because it searches for the SQL-handler in the current scope only (during runtime, current and parent scopes should be checked according to the SQL-handler resolution rules).</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">condition_value</td><td>the handler condition value (not SQL-condition!).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if such SQL-handler exists. </td></tr>
    <tr><td class="paramname">false</td><td>otherwise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a99788ecb09e0b2dfbe4d49238e2d0754"></a><!-- doxytag: member="sp_pcontext::context_var_count" ref="a99788ecb09e0b2dfbe4d49238e2d0754" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint <a class="el" href="classsp__pcontext.html#a99788ecb09e0b2dfbe4d49238e2d0754">sp_pcontext::context_var_count</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of variables in this context alone. </dd></dl>

</div>
</div>
<a class="anchor" id="a1f32e83932496c0b37f687fb485fc824"></a><!-- doxytag: member="sp_pcontext::current_var_count" ref="a1f32e83932496c0b37f687fb485fc824" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint <a class="el" href="classsp__pcontext.html#a1f32e83932496c0b37f687fb485fc824">sp_pcontext::current_var_count</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the current number of variables used in the parent contexts (from the root), including this context. </dd></dl>

</div>
</div>
<a class="anchor" id="a480a92643ee11341486f2ed2aec31593"></a><!-- doxytag: member="sp_pcontext::declare_var_boundary" ref="a480a92643ee11341486f2ed2aec31593" args="(uint n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsp__pcontext.html#a480a92643ee11341486f2ed2aec31593">sp_pcontext::declare_var_boundary</a> </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the current scope boundary (for default values).</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>The number of variables to skip. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a798a503efdaa0f3e96909f24b9293595"></a><!-- doxytag: member="sp_pcontext::diff_cursors" ref="a798a503efdaa0f3e96909f24b9293595" args="(const sp_pcontext *ctx, bool exclusive) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint <a class="el" href="classsp__pcontext.html#a798a503efdaa0f3e96909f24b9293595">sp_pcontext::diff_cursors</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsp__pcontext.html">sp_pcontext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exclusive</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Calculate and return the number of cursors to pop between the given context and this one.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>the other parsing context. </td></tr>
    <tr><td class="paramname">exclusive</td><td>specifies if the last scope should be excluded.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of cursors to pop between the given context and this one. If 'exclusive' is true, don't count the last scope we are leaving; this is used for LEAVE where we will jump to the cpop instructions. </dd></dl>

</div>
</div>
<a class="anchor" id="a78b9d3135fc244e02d1af52010802adb"></a><!-- doxytag: member="sp_pcontext::diff_handlers" ref="a78b9d3135fc244e02d1af52010802adb" args="(const sp_pcontext *ctx, bool exclusive) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint <a class="el" href="classsp__pcontext.html#a78b9d3135fc244e02d1af52010802adb">sp_pcontext::diff_handlers</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsp__pcontext.html">sp_pcontext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exclusive</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Calculate and return the number of handlers to pop between the given context and this one.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>the other parsing context. </td></tr>
    <tr><td class="paramname">exclusive</td><td>specifies if the last scope should be excluded.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of handlers to pop between the given context and this one. If 'exclusive' is true, don't count the last scope we are leaving; this is used for LEAVE where we will jump to the hpop instructions. </dd></dl>

</div>
</div>
<a class="anchor" id="a7cae2a84262f85ce6d22edcbb508b77c"></a><!-- doxytag: member="sp_pcontext::find_handler" ref="a7cae2a84262f85ce6d22edcbb508b77c" args="(const char *sql_state, uint sql_errno, Sql_condition::enum_warning_level level) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsp__handler.html">sp_handler</a> * <a class="el" href="classsp__pcontext.html#a7cae2a84262f85ce6d22edcbb508b77c">sp_pcontext::find_handler</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sql_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>sql_errno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sql_condition::enum_warning_level&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find an SQL handler for the given SQL condition according to the SQL-handler resolution rules. This function is used at runtime.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sql_state</td><td>The SQL condition state </td></tr>
    <tr><td class="paramname">sql_errno</td><td>The error code </td></tr>
    <tr><td class="paramname">level</td><td>The SQL condition level</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a pointer to the found SQL-handler or NULL. </dd></dl>

</div>
</div>
<a class="anchor" id="a20b41a193c8cbd622730f12117e57cc8"></a><!-- doxytag: member="sp_pcontext::find_variable" ref="a20b41a193c8cbd622730f12117e57cc8" args="(LEX_STRING name, bool current_scope_only) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsp__variable.html">sp_variable</a> * <a class="el" href="classsp__pcontext.html#a20b41a193c8cbd622730f12117e57cc8">sp_pcontext::find_variable</a> </td>
          <td>(</td>
          <td class="paramtype">LEX_STRING&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>current_scope_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find SP-variable by name.</p>
<p>The function does a linear search (from newer to older variables, in case we have shadowed names).</p>
<p>The function is called only at parsing time.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Variable name. </td></tr>
    <tr><td class="paramname">current_scope_only</td><td>A flag if we search only in current scope.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>instance of found SP-variable, or NULL if not found. </dd></dl>

</div>
</div>
<a class="anchor" id="a8f43fae8eea9ae1b1949d632159366d8"></a><!-- doxytag: member="sp_pcontext::find_variable" ref="a8f43fae8eea9ae1b1949d632159366d8" args="(uint offset) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsp__variable.html">sp_variable</a> * <a class="el" href="classsp__pcontext.html#a20b41a193c8cbd622730f12117e57cc8">sp_pcontext::find_variable</a> </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find SP-variable by the offset in the root parsing context.</p>
<p>The function is used for two things:</p>
<ul>
<li>When evaluating parameters at the beginning, and setting out parameters at the end, of invocation. (Top frame only, so no recursion then.)</li>
<li>For printing of <a class="el" href="classsp__instr__set.html">sp_instr_set</a>. (Debug mode only.)</li>
</ul>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>Variable offset in the root parsing context.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>instance of found SP-variable, or NULL if not found. </dd></dl>

</div>
</div>
<a class="anchor" id="a7eb079b6c74727c9f1f41a5dbfb1af64"></a><!-- doxytag: member="sp_pcontext::max_var_index" ref="a7eb079b6c74727c9f1f41a5dbfb1af64" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint <a class="el" href="classsp__pcontext.html#a7eb079b6c74727c9f1f41a5dbfb1af64">sp_pcontext::max_var_index</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the maximum number of variables used in this and all child contexts. For the root parsing context, this gives us the number of slots needed for variables during the runtime phase. </dd></dl>

</div>
</div>
<a class="anchor" id="ae7e4af2bd11d58a2950462a490612a31"></a><!-- doxytag: member="sp_pcontext::pop_context" ref="ae7e4af2bd11d58a2950462a490612a31" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsp__pcontext.html">sp_pcontext</a> * <a class="el" href="classsp__pcontext.html#ae7e4af2bd11d58a2950462a490612a31">sp_pcontext::pop_context</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pop a node from the parsing context tree. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the parent node. </dd></dl>

</div>
</div>
<a class="anchor" id="a486b4feb63c343fea40adcf197bde017"></a><!-- doxytag: member="sp_pcontext::push_context" ref="a486b4feb63c343fea40adcf197bde017" args="(THD *thd, enum_scope scope)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsp__pcontext.html">sp_pcontext</a> * <a class="el" href="classsp__pcontext.html#a486b4feb63c343fea40adcf197bde017">sp_pcontext::push_context</a> </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsp__pcontext.html#a6252258e34c191cbf1b5e86628cd29c6">sp_pcontext::enum_scope</a>&#160;</td>
          <td class="paramname"><em>scope</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create and push a new context in the tree. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread context. </td></tr>
    <tr><td class="paramname">scope</td><td>scope of the new parsing context. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the node created. </dd></dl>

</div>
</div>
<a class="anchor" id="ac74f6b8abd919afd9619fca234cf958f"></a><!-- doxytag: member="sp_pcontext::retrieve_field_definitions" ref="ac74f6b8abd919afd9619fca234cf958f" args="(List&lt; Create_field &gt; *field_def_lst) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classsp__pcontext.html#ac74f6b8abd919afd9619fca234cf958f">sp_pcontext::retrieve_field_definitions</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classList.html">List</a>&lt; <a class="el" href="classCreate__field.html">Create_field</a> &gt; *&#160;</td>
          <td class="paramname"><em>field_def_lst</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieve full type information about SP-variables in this parsing context and its children.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">field_def_lst[out]</td><td>Container to store type information. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab65699bfa6c23e807a299280997d5db1"></a><!-- doxytag: member="sp_pcontext::var_context2runtime" ref="ab65699bfa6c23e807a299280997d5db1" args="(uint i) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint <a class="el" href="classsp__pcontext.html#ab65699bfa6c23e807a299280997d5db1">sp_pcontext::var_context2runtime</a> </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>map index in this parsing context to runtime offset. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="sp__pcontext_8h_source.html">sp_pcontext.h</a></li>
<li>sp_pcontext.cc</li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 16 2015 12:37:20 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
