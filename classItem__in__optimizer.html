<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: Item_in_optimizer Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Item_in_optimizer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="Item_in_optimizer" --><!-- doxytag: inherits="Item_bool_func" --><div class="dynheader">
Inheritance diagram for Item_in_optimizer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classItem__in__optimizer.png" usemap="#Item_in_optimizer_map" alt=""/>
  <map id="Item_in_optimizer_map" name="Item_in_optimizer_map">
<area href="classItem__bool__func.html" alt="Item_bool_func" shape="rect" coords="0,224,108,248"/>
<area href="classItem__int__func.html" alt="Item_int_func" shape="rect" coords="0,168,108,192"/>
<area href="classItem__func.html" alt="Item_func" shape="rect" coords="0,112,108,136"/>
<area href="classItem__result__field.html" alt="Item_result_field" shape="rect" coords="0,56,108,80"/>
<area href="classItem.html" alt="Item" shape="rect" coords="0,0,108,24"/>
</map>
 </div></div>

<p><a href="classItem__in__optimizer-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1121b9bd7660aa517c6e1a23389841c"></a><!-- doxytag: member="Item_in_optimizer::Item_in_optimizer" ref="ab1121b9bd7660aa517c6e1a23389841c" args="(Item *a, Item_in_subselect *b)" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>Item_in_optimizer</b> (<a class="el" href="classItem.html">Item</a> *a, <a class="el" href="classItem__in__subselect.html">Item_in_subselect</a> *b)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae3b3c07b41aef12ddba3b37d15e3b2cd"></a><!-- doxytag: member="Item_in_optimizer::fix_fields" ref="ae3b3c07b41aef12ddba3b37d15e3b2cd" args="(THD *, Item **)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>fix_fields</b> (THD *, <a class="el" href="classItem.html">Item</a> **)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abaf7a4fa49ad9c50e229050cfa2d18d9"></a><!-- doxytag: member="Item_in_optimizer::fix_left" ref="abaf7a4fa49ad9c50e229050cfa2d18d9" args="(THD *thd, Item **ref)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>fix_left</b> (THD *thd, <a class="el" href="classItem.html">Item</a> **ref)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__in__optimizer.html#aeac1cb56fd617d7cebee1d792b02ba1a">fix_after_pullout</a> (st_select_lex *parent_select, st_select_lex *removed_select)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab8681df87072f6792eeb23056a8b4b28"></a><!-- doxytag: member="Item_in_optimizer::is_null" ref="ab8681df87072f6792eeb23056a8b4b28" args="()" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_null</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">longlong&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__in__optimizer.html#a24ae21b54394fd097a1b9ec9fd812bd9">val_int</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6b5861d9a68a5b6aeb160e32befa3952"></a><!-- doxytag: member="Item_in_optimizer::cleanup" ref="a6b5861d9a68a5b6aeb160e32befa3952" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>cleanup</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a476f6aebe5dd734e41241412604d205d"></a><!-- doxytag: member="Item_in_optimizer::func_name" ref="a476f6aebe5dd734e41241412604d205d" args="() const " -->
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>func_name</b> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aee053a2da640c0368afe28e33f06ebbb"></a><!-- doxytag: member="Item_in_optimizer::get_cache" ref="aee053a2da640c0368afe28e33f06ebbb" args="()" -->
<a class="el" href="classItem__cache.html">Item_cache</a> **&#160;</td><td class="memItemRight" valign="bottom"><b>get_cache</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a275f462b11430e49fd99eeb6cc5411c2"></a><!-- doxytag: member="Item_in_optimizer::keep_top_level_cache" ref="a275f462b11430e49fd99eeb6cc5411c2" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>keep_top_level_cache</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classItem.html">Item</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classItem__in__optimizer.html#abf3e3561b7ff2f5e6d58a343cc93fcc5">transform</a> (Item_transformer transformer, uchar *arg)</td></tr>
</table>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aeac1cb56fd617d7cebee1d792b02ba1a"></a><!-- doxytag: member="Item_in_optimizer::fix_after_pullout" ref="aeac1cb56fd617d7cebee1d792b02ba1a" args="(st_select_lex *parent_select, st_select_lex *removed_select)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classItem__in__optimizer.html#aeac1cb56fd617d7cebee1d792b02ba1a">Item_in_optimizer::fix_after_pullout</a> </td>
          <td>(</td>
          <td class="paramtype">st_select_lex *&#160;</td>
          <td class="paramname"><em>parent_select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">st_select_lex *&#160;</td>
          <td class="paramname"><em>removed_select</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Fix after tables have been moved from one select_lex level to the parent level, e.g by semijoin conversion. Basically re-calculate all attributes dependent on the tables.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">parent_select</td><td>select_lex that tables are moved to. </td></tr>
    <tr><td class="paramname">removed_select</td><td>select_lex that tables are moved away from, child of parent_select. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classItem__func.html#ab2b8cc7a3bf580679718da7e99e3e8d9">Item_func</a>.</p>

</div>
</div>
<a class="anchor" id="abf3e3561b7ff2f5e6d58a343cc93fcc5"></a><!-- doxytag: member="Item_in_optimizer::transform" ref="abf3e3561b7ff2f5e6d58a343cc93fcc5" args="(Item_transformer transformer, uchar *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classItem.html">Item</a> * <a class="el" href="classItem__in__optimizer.html#abf3e3561b7ff2f5e6d58a343cc93fcc5">Item_in_optimizer::transform</a> </td>
          <td>(</td>
          <td class="paramtype">Item_transformer&#160;</td>
          <td class="paramname"><em>transformer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>argument</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Transform an <a class="el" href="classItem__in__optimizer.html">Item_in_optimizer</a> and its arguments with a callback function.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">transformer</td><td>the transformer callback function to be applied to the nodes of the tree of the object </td></tr>
    <tr><td class="paramname">parameter</td><td>to be passed to the transformer</td></tr>
  </table>
  </dd>
</dl>
<p>Recursively transform the left and the right operand of this <a class="el" href="classItem.html">Item</a>. The Right operand is an <a class="el" href="classItem__in__subselect.html">Item_in_subselect</a> or its subclass. To avoid the creation of new Items, we use the fact the the left operand of the <a class="el" href="classItem__in__subselect.html">Item_in_subselect</a> is the same as the one of 'this', so instead of transforming its operand, we just assign the left operand of the <a class="el" href="classItem__in__subselect.html">Item_in_subselect</a> to be equal to the left operand of 'this'. The transformation is not applied further to the subquery operand if the IN predicate.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">pointer</td><td>to the transformed item </td></tr>
    <tr><td class="paramname">NULL</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classItem__func.html#a808d0fe427eec3c050ee5214594b8908">Item_func</a>.</p>

</div>
</div>
<a class="anchor" id="a24ae21b54394fd097a1b9ec9fd812bd9"></a><!-- doxytag: member="Item_in_optimizer::val_int" ref="a24ae21b54394fd097a1b9ec9fd812bd9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">longlong <a class="el" href="classItem__in__optimizer.html#a24ae21b54394fd097a1b9ec9fd812bd9">Item_in_optimizer::val_int</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The implementation of optimized &lt;outer expression&gt; [NOT] IN &lt;subquery&gt; predicates. It applies to predicates which have gone through the IN-&gt;EXISTS transformation in in_to_exists_transformer functions; not to subquery materialization (which has no triggered conditions).</p>
<p>The implementation works as follows. For the current value of the outer expression</p>
<ul>
<li>If it contains only NULL values, the original (before rewrite by the <a class="el" href="classItem__in__subselect.html">Item_in_subselect</a> rewrite methods) inner subquery is non-correlated and was previously executed, there is no need to re-execute it, and the previous return value is returned.</li>
</ul>
<ul>
<li>If it contains NULL values, check if there is a partial match for the inner query block by evaluating it. For clarity we repeat here the transformation previously performed on the sub-query. The expression</li>
</ul>
<p><code> ( oc_1, ..., oc_n ) &lt;in predicate&gt; ( SELECT ic_1, ..., ic_n FROM &lt;table&gt; WHERE &lt;inner where&gt; ) </code></p>
<p>was transformed into</p>
<p><code> ( oc_1, ..., oc_n ) &lt;in predicate&gt; ( SELECT ic_1, ..., ic_n FROM &lt;table&gt; WHERE &lt;inner where&gt; AND ... ( ic_k = oc_k OR ic_k IS NULL ) HAVING ... NOT ic_k IS NULL ) </code></p>
<p>The evaluation will now proceed according to special rules set up elsewhere. These rules include:</p>
<ul>
<li>The HAVING NOT &lt;inner column&gt; IS NULL conditions added by the aforementioned rewrite methods will detect whether they evaluated (and rejected) a NULL value and if so, will cause the subquery to evaluate to NULL.</li>
</ul>
<ul>
<li>The added WHERE and HAVING conditions are present only for those inner columns that correspond to outer column that are not NULL at the moment.</li>
</ul>
<ul>
<li>If there is an eligible index for executing the subquery, the special access method "Full scan on NULL key" is employed which ensures that the inner query will detect if there are NULL values resulting from the inner query. This access method will quietly resort to table scan if it needs to find NULL values as well.</li>
</ul>
<ul>
<li>Under these conditions, the sub-query need only be evaluated in order to find out whether it produced any rows.</li>
</ul>
<ul>
<li>If it did, we know that there was a partial match since there are NULL values in the outer row expression.</li>
</ul>
<ul>
<li>If it did not, the result is FALSE or UNKNOWN. If at least one of the HAVING sub-predicates rejected a NULL value corresponding to an outer non-NULL, and hence the inner query block returns UNKNOWN upon evaluation, there was a partial match and the result is UNKNOWN.</li>
</ul>
<ul>
<li>If it contains no NULL values, the call is forwarded to the inner query block.</li>
</ul>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classItem__in__subselect.html#a137eef270a78238c1bafde29071cbbcb">Item_in_subselect::val_bool()</a> </dd>
<dd>
Item_is_not_null_test::val_int() </dd></dl>

<p>Implements <a class="el" href="classItem.html">Item</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="item__cmpfunc_8h_source.html">item_cmpfunc.h</a></li>
<li><a class="el" href="item__cmpfunc_8cc.html">item_cmpfunc.cc</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 16 2015 12:36:40 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
